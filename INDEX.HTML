<!DOCTYPE html><html lang="zh-Hant"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://i.ytimg.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥ç›®æ¨™èˆ‡ç¾ç‹€è‡ªæˆ‘è¦ºå¯Ÿè¨˜éŒ„</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 90 90'%3E%3Ctext y='90' font-size='90'%3EğŸŒ %3C/text%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .dark ::-webkit-scrollbar-track {
            background: #374151;
        }
        
        .dark ::-webkit-scrollbar-thumb {
            background: #6B7280;
        }
        
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #9CA3AF;
        }

        /* è‡ªå®šç¾©å‹•ç•« */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }

        /* è‡ªå®šç¾©å½ˆè·³å‹•ç•« */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .animate-bounce-custom {
            animation: bounce 0.6s ease-in-out;
        }

        /* æ—¥æ›†è‰²å¡Šæ¨£å¼ */
        .calendar-day {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
        }

        .calendar-day:hover {
            background-color: #EEE;
        }

        .dark .calendar-day:hover {
            background-color: #4B5563;
        }

        .calendar-day.selected {
            background-color: #5D5CDE;
            color: white;
        }

        .calendar-day.completed {
            border-bottom: 3px solid #10B981;
        }

        .calendar-day.partial {
            border-bottom: 3px solid #F59E0B;
        }

        .calendar-day.missed {
            border-bottom: 3px solid #EF4444;
        }

        /* æƒ…ç·’åœ–æ¨™ */
        .mood-icon {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 16px;
            height: 16px;
            font-size: 10px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* é€²åº¦æ¢æ¨£å¼ */
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background-color: #E5E7EB;
            overflow: hidden;
        }
        
        .dark .progress-bar {
            background-color: #4B5563;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #5D5CDE;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* ä»»å‹™å¡ç‰‡æ¨£å¼ */
        .task-card {
            transition: all 0.3s ease;
        }
        
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* æ¨™ç±¤æ¨£å¼ */
        .tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            background-color: #E5E7EB;
            color: #4B5563;
            margin-right: 0.5rem;
            white-space: nowrap;
        }
        
        .dark .tag {
            background-color: #4B5563;
            color: #E5E7EB;
        }
        
        /* è¼¸å…¥æ¡†ç„¦é»æ¨£å¼ */
        .input-focus:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.3);
            border-color: #5D5CDE;
        }
        
        /* æ¨™ç±¤æ¨£å¼ */
        .category-tag {
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 12px;
        }
        
        /* æ ¹æ“šé¡åˆ¥è¨­ç½®ä¸åŒé¡è‰² */
        .category-work { background-color: #DBEAFE; color: #1E40AF; }
        .category-study { background-color: #E0E7FF; color: #3730A3; }
        .category-health { background-color: #D1FAE5; color: #065F46; }
        .category-personal { background-color: #FEF3C7; color: #92400E; }
        .category-other { background-color: #F3E8FF; color: #6B21A8; }
        
        .dark .category-work { background-color: #1E40AF; color: #DBEAFE; }
        .dark .category-study { background-color: #3730A3; color: #E0E7FF; }
        .dark .category-health { background-color: #065F46; color: #D1FAE5; }
        .dark .category-personal { background-color: #92400E; color: #FEF3C7; }
        .dark .category-other { background-color: #6B21A8; color: #F3E8FF; }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- æª¢æ¸¬æš—æ¨¡å¼ -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- ä¸»å®¹å™¨ -->
    <div class="flex flex-col md:flex-row h-screen">
        <!-- å´é‚Šå°èˆªæ¬„ -->
        <div class="w-full md:w-64 bg-gray-100 dark:bg-gray-800 p-4 shadow-md md:h-full overflow-auto">
            <div class="flex items-center justify-center mb-6">
                <h1 class="text-xl font-bold text-center text-indigo-600 dark:text-indigo-400">æ¯æ—¥ç›®æ¨™èˆ‡è‡ªæˆ‘è¦ºå¯Ÿ</h1>
            </div>
            
            <!-- å°èˆªé¸é … -->
            <nav class="space-y-2">
                <button class="nav-btn w-full py-2 px-4 rounded-lg flex items-center gap-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300" data-target="daily-tracking">
                    <i class="fas fa-calendar-check"></i>
                    <span>æ¯æ—¥è¿½è¹¤</span>
                </button>
                <button class="nav-btn w-full py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-700" data-target="goal-management">
                    <i class="fas fa-bullseye"></i>
                    <span>ç›®æ¨™ç®¡ç†</span>
                </button>
                <button class="nav-btn w-full py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-700" data-target="self-reflection">
                    <i class="fas fa-brain"></i>
                    <span>è‡ªæˆ‘åæ€</span>
                </button>
                <button class="nav-btn w-full py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-700" data-target="progress-visualization">
                    <i class="fas fa-chart-line"></i>
                    <span>é€²åº¦å¯è¦–åŒ–</span>
                </button>
            </nav>
            
            <!-- æ—¥æœŸé¸æ“‡å™¨ -->
            <div class="mt-6 bg-white dark:bg-gray-700 rounded-lg p-4 shadow-sm">
                <h2 class="text-sm font-semibold mb-2 text-gray-600 dark:text-gray-300">é¸æ“‡æ—¥æœŸ</h2>
                <div class="flex justify-between items-center mb-2">
                    <button id="prev-month" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span id="current-month" class="text-sm font-medium">2023å¹´10æœˆ</span>
                    <button id="next-month" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="grid grid-cols-7 gap-1 text-center">
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">æ—¥</div>
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">ä¸€</div>
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">äºŒ</div>
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">ä¸‰</div>
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">å››</div>
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">äº”</div>
                    <div class="text-xs font-medium text-gray-500 dark:text-gray-400">å…­</div>
                </div>
                <div id="calendar-days" class="grid grid-cols-7 gap-1 mt-1">
                    <!-- æ—¥æ›†æ—¥æœŸå°‡é€šé JavaScript å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
            
            <!-- çµ±è¨ˆæ‘˜è¦ -->
            <div class="mt-6 bg-white dark:bg-gray-700 rounded-lg p-4 shadow-sm">
                <h2 class="text-sm font-semibold mb-2 text-gray-600 dark:text-gray-300">çµ±è¨ˆæ‘˜è¦</h2>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-500 dark:text-gray-400">ç¸½è¨˜éŒ„å¤©æ•¸</span>
                        <span id="total-days" class="text-xs font-medium">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-500 dark:text-gray-400">å®Œæˆä»»å‹™æ•¸</span>
                        <span id="completed-tasks" class="text-xs font-medium">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-500 dark:text-gray-400">é”æˆç›®æ¨™æ•¸</span>
                        <span id="completed-goals" class="text-xs font-medium">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-500 dark:text-gray-400">æœ€é•·é€£çºŒè¨˜éŒ„</span>
                        <span id="longest-streak" class="text-xs font-medium">0å¤©</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦å…§å®¹å€ -->
        <div class="flex-1 overflow-auto p-4">
            <!-- æ¯æ—¥è¿½è¹¤å€å¡Š -->
            <div id="daily-tracking" class="content-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- å·¦å´ï¼šä»Šæ—¥å‹•æ©Ÿèˆ‡æª¢æŸ¥å€ -->
                    <div>
                        <!-- ä»Šæ—¥ GIF å’Œæ¿€å‹µèªéŒ„ -->
                        <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">ä»Šæ—¥éˆæ„Ÿ</h2>
                            <div class="flex flex-col items-center">
                                <div id="inspiration-gif" class="w-full h-48 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4 overflow-hidden">
                                    <!-- GIF å°‡åœ¨é€™è£¡åŠ è¼‰ -->
                                    <img id="gif-image" src="" alt="æ¯æ—¥æ¿€å‹µåœ–ç‰‡" class="w-full h-full object-cover">
                                </div>
                                <div class="flex justify-center mb-4">
                                    
                                </div>
                                <p id="motivation-quote" class="text-center italic text-gray-600 dark:text-gray-300">
                                    <!-- æ¿€å‹µèªéŒ„å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                                </p>
                                <button id="change-image-btn" class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm">
                                    <i class="fas fa-sync-alt mr-1"></i>æ›ä¸€å‰‡
                                </button>
                            </div>
                        </div>

                        <!-- èƒ½é‡ç­‰ç´šèˆ‡å¿ƒæƒ… -->
                        <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">ä»Šæ—¥ç‹€æ…‹</h2>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šæ—¥èƒ½é‡ç­‰ç´š</label>
                                    <div class="flex items-center">
                                        <input type="range" id="energy-level" min="0" max="10" step="1" class="w-full" value="5">
                                        <span id="energy-value" class="ml-2 text-gray-800 dark:text-gray-200 font-medium">5</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šæ—¥å¿ƒæƒ…</label>
                                    <div class="grid grid-cols-5 gap-2">
                                        <button class="mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="happy">
                                            <span class="text-xl">ğŸ˜Š</span>
                                            <span class="text-xs mt-1">é–‹å¿ƒ</span>
                                        </button>
                                        <button class="mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="calm">
                                            <span class="text-xl">ğŸ˜Œ</span>
                                            <span class="text-xs mt-1">å¹³éœ</span>
                                        </button>
                                        <button class="mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="tired">
                                            <span class="text-xl">ğŸ˜©</span>
                                            <span class="text-xs mt-1">ç–²æ†Š</span>
                                        </button>
                                        <button class="mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="anxious">
                                            <span class="text-xl">ğŸ˜Ÿ</span>
                                            <span class="text-xs mt-1">ç„¦æ…®</span>
                                        </button>
                                        <button class="mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="motivated">
                                            <span class="text-xl">ğŸ’ª</span>
                                            <span class="text-xs mt-1">æœ‰å‹•åŠ›</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                   
                        <!-- MUSICğŸ¤ -->
                                <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                                    <h2 class="text-lg font-semibold mb-2 text-indigo-600 dark:text-indigo-400 flex items-center justify-between">
                                        <span>éŸ³æ¨‚æ’­æ”¾å™¨</span>
                                        <button id="toggle-playlist" class="text-sm px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded hover:bg-indigo-200 dark:hover:bg-indigo-800">
                                            <i class="fas fa-list mr-1"></i>æ’­æ”¾æ¸…å–®
                                        </button>
                                    </h2>
                                    
                                    <!-- ä¸»æ’­æ”¾å™¨å€å¡Š -->
                                    <div class="player-container">
                                        <!-- ç¸®ç•¥åœ–å’Œæ­Œæ›²ä¿¡æ¯ -->
                                        <div class="flex items-center mb-3">
                                            <div class="thumbnail-container w-20 h-20 mr-3 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden">
                                                <img id="song-thumbnail" src="" alt="æ­Œæ›²ç¸®ç•¥åœ–" class="w-full h-full object-cover">
                                            </div>
                                            <div class="flex-1">
                                                <h3 id="song-title" class="font-medium text-gray-800 dark:text-gray-200 text-sm mb-1 line-clamp-2"></h3>
                                                <p id="channel-title" class="text-xs text-gray-500 dark:text-gray-400"></p>
                                            </div>
                                        </div>
                                        
                                        <!-- é€²åº¦æ¢ -->
                                        <div class="mb-3">
                                            <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1">
                                                <span id="current-time">0:00</span>
                                                <span id="duration">0:00</span>
                                            </div>
                                            <div class="progress-bar h-2 bg-gray-200 dark:bg-gray-700 rounded-full cursor-pointer" id="progress-bar">
                                                <div id="progress-fill" class="h-full bg-indigo-600 dark:bg-indigo-500 rounded-full" style="width: 0%"></div>
                                            </div>
                                        </div>
                                        
                                        <!-- æ§åˆ¶æŒ‰éˆ• -->
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-4">
                                                <button id="prev-song" class="text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                                                    <img width="25" height="25" src="https://img.icons8.com/nolan/25/rewind.png" alt="rewind"/>
                                                </button>
                                                <button id="play-pause" class="w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900 text-white flex items-center justify-center">
                                                    <img width="35" height="35" src="https://img.icons8.com/nolan/25/play.png" alt="play"/>
                                                </button>
                                                <button id="next-song" class="text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                                                    <img width="25" height="25" src="https://img.icons8.com/nolan/25/fast-forward.png" alt="fast-forward"/>
                                                </button>
                                            </div>
                                            <div class="flex items-center gap-3">
                                                <button id="loop-button" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400" title="å¾ªç’°æ’­æ”¾">
                                                    <img width="25" height="25" src="https://img.icons8.com/dotty/80/repeat.png" alt="repeat"/>
                                                </button>

                                                <button id="shuffle-button" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400" title="éš¨æ©Ÿæ’­æ”¾">
                                                    <img width="25" height="25" src="https://img.icons8.com/dotty/25/shuffle.png" alt="shuffle"/>
                                                </button>

                                                <button id="single-loop-button" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400" title="å–®æ›²å¾ªç’°">
                                                    <img width="25" height="25" src="https://img.icons8.com/dotty/25/repeat-one.png" alt="repeat-one"/>
                                                </button>

                                                <div class="volume-container relative">
                                                    <button id="volume-button" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400">
                                                        <img width="25" height="25" src="https://img.icons8.com/dotty/25/high-volume.png" alt="high-volume"/>
                                                </button>

                                                    <div class="volume-slider hidden absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-24 h-8 bg-white dark:bg-gray-700 rounded shadow p-2">
                                                        <input type="range" id="volume-control" min="0" max="100" value="70" class="w-full">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- æ’­æ”¾æ¸…å–® (é è¨­éš±è—) -->
                                    <div id="playlist-container" class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 hidden">
                                        <h3 class="text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">æ’­æ”¾æ¸…å–®</h3>
                                        <div id="playlist" class="max-h-64 overflow-y-auto">
                                            <!-- æ’­æ”¾æ¸…å–®é …ç›®å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                                        </div>
                                    </div>
                                    
                                    <!-- éš±è—çš„YouTubeæ’­æ”¾å™¨ -->
                                    <div id="youtube-player" class="hidden"></div>
                                </div>
                            </div>
                    <!-- å³å´ï¼šä»Šæ—¥ä»»å‹™ -->
                    <div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-lg font-semibold text-indigo-600 dark:text-indigo-400">ä»Šæ—¥ä»»å‹™</h2>
                                <button id="add-daily-task" class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm">
                                    <i class="fas fa-plus mr-1"></i>æ–°å¢ä»»å‹™
                                </button>
                            </div>
                            
                            <!-- ä»»å‹™åˆ—è¡¨ -->
                            <div id="daily-tasks-container" class="space-y-3">
                                <!-- ä»»å‹™å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                                <div class="text-center text-gray-500 dark:text-gray-400 py-10" id="empty-task-message">
                                    <i class="fas fa-tasks text-3xl mb-2"></i>
                                    <p>é‚„æ²’æœ‰ä»Šæ—¥ä»»å‹™ï¼Œé»æ“Šä¸Šæ–¹ã€Œæ–°å¢ä»»å‹™ã€é–‹å§‹è¨ˆåŠƒä½ çš„ä¸€å¤©ã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç›®æ¨™ç®¡ç†å€å¡Š -->
            <div id="goal-management" class="content-section hidden">
                <div class="grid grid-cols-1 lg:grid-cols-[1fr_2fr] gap-6">
                    <!-- å·¦å´ï¼šç›®æ¨™åˆ—è¡¨ -->
                    <div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-lg font-semibold text-indigo-600 dark:text-indigo-400">æˆ‘çš„ç›®æ¨™</h2>
                                <button id="add-goal" class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm">
                                    <i class="fas fa-plus mr-1"></i>æ–°å¢ç›®æ¨™
                                </button>
                            </div>
                            
                            <!-- ç›®æ¨™åˆ—è¡¨ -->
                            <div id="goals-container" class="space-y-3">
                                <!-- ç›®æ¨™å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                                <div class="text-center text-gray-500 dark:text-gray-400 py-10" id="empty-goal-message">
                                    <i class="fas fa-bullseye text-3xl mb-2"></i>
                                    <p>é‚„æ²’æœ‰è¨­å®šç›®æ¨™ï¼Œé»æ“Šä¸Šæ–¹ã€Œæ–°å¢ç›®æ¨™ã€é–‹å§‹è¦åŠƒä½ çš„äººç”Ÿç›®æ¨™ã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸­é–“ï¼šå­ä»»å‹™åˆ—è¡¨ -->
                    <div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <!-- å³å´ï¼šç›®æ¨™è©³æƒ… -->
                    <div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-lg font-semibold text-indigo-600 dark:text-indigo-400">ç›®æ¨™è©³æƒ…</h2>
                                <div>
                                    <button id="edit-goal" class="px-3 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm" disabled="">
                                        <i class="fas fa-edit mr-1"></i>ç·¨è¼¯
                                    </button>
                                    <button id="delete-goal" class="px-3 py-1 bg-red-100 dark:bg-red-900 hover:bg-red-200 dark:hover:bg-red-800 text-red-700 dark:text-red-300 rounded-lg text-sm ml-2" disabled="">
                                        <i class="fas fa-trash mr-1"></i>åˆªé™¤
                                    </button>
                                </div>
                            </div>
                            
                            <!-- ç›®æ¨™è©³æƒ… -->
                            <div id="goal-details-container">
                                <!-- ç›®æ¨™è©³æƒ…å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                                <div class="text-center text-gray-500 dark:text-gray-400 py-10" id="empty-goal-details">
                                    <i class="fas fa-file-alt text-3xl mb-2"></i>
                                    <p>è«‹é¸æ“‡ä¸€å€‹ç›®æ¨™ä¾†æŸ¥çœ‹è©³æƒ…ã€‚</p>
                                </div>
                                
                                <div id="goal-details" class="hidden">
                                    <div class="mb-4">
                                        <h3 id="goal-detail-title" class="text-xl font-bold mb-2">ç›®æ¨™æ¨™é¡Œ</h3>
                                        <div class="flex space-x-2 mb-2">
                                            <span id="goal-detail-category" class="category-tag category-work">å·¥ä½œ</span>
                                            <span id="goal-detail-deadline" class="text-sm text-gray-500 dark:text-gray-400"><i class="far fa-calendar-alt mr-1"></i>2023-12-31</span>
                                        </div>
                                        <div class="mb-2">
                                            <div class="flex justify-between text-sm mb-1">
                                                <span>ç›®æ¨™é€²åº¦</span>
                                                <span id="goal-detail-progress-text">0%</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div id="goal-detail-progress" class="progress-fill" style="width: 0%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <h4 class="text-lg font-medium mb-3">ç›®æ¨™åŸå›  (Why)</h4>
                                        <p id="goal-detail-why" class="text-sm bg-gray-50 dark:bg-gray-700 p-2 rounded">ç‚ºä»€éº¼æƒ³é”æˆé€™å€‹ç›®æ¨™ï¼Ÿ</p>
                                    </div>
                                    
                                    <div class="border-t dark:border-gray-700 pt-4">
                                        <h4 class="text-lg font-medium mb-3">SMART ç›®æ¨™æ¡†æ¶</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                                <h5 class="font-medium text-primary mb-1">å…·é«” (Specific)</h5>
                                                <p id="goal-detail-specific" class="text-sm">å…·é«”æè¿°</p>
                                            </div>
                                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                                <h5 class="font-medium text-primary mb-1">å¯è¡¡é‡ (Measurable)</h5>
                                                <p id="goal-detail-measurable" class="text-sm">è¡¡é‡æ¨™æº–</p>
                                            </div>
                                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                                <h5 class="font-medium text-primary mb-1">å¯é”æˆ (Achievable)</h5>
                                                <p id="goal-detail-achievable" class="text-sm">å¯è¡Œæ€§</p>
                                            </div>
                                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3">
                                                <h5 class="font-medium text-primary mb-1">ç›¸é—œæ€§ (Relevant)</h5>
                                                <p id="goal-detail-relevant" class="text-sm">èˆ‡è‡ªèº«ç™¼å±•çš„ç›¸é—œæ€§</p>
                                            </div>
                                            <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-3 md:col-span-2">
                                                <h5 class="font-medium text-primary mb-1">æ™‚é–“é™åˆ¶ (Time-bound)</h5>
                                                <p id="goal-detail-timebound" class="text-sm">æ™‚é–“é™åˆ¶</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                            <div>
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 mt-4">
                                <div class="flex justify-between items-center mb-4">
                                <h2 class="text-lg font-semibold text-indigo-600 dark:text-indigo-400">å­ä»»å‹™</h2>
                                <button id="add-subtask" class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm" disabled="">
                                    <i class="fas fa-plus mr-1"></i>æ–°å¢å­ä»»å‹™
                                </button></div>
                            
                            
                            <!-- å­ä»»å‹™åˆ—è¡¨ -->
                            <div id="subtasks-container" class="space-y-3">
                                <!-- å­ä»»å‹™å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                                <div class="text-center text-gray-500 dark:text-gray-400 py-10" id="empty-subtask-message">
                                    <i class="fas fa-tasks text-3xl mb-2"></i>
                                    <p>è«‹é¸æ“‡ä¸€å€‹ç›®æ¨™ä¾†æŸ¥çœ‹æˆ–æ·»åŠ å­ä»»å‹™ã€‚</p>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                    
                </div>
            </div>

            <!-- è‡ªæˆ‘åæ€å€å¡Š -->
            <div id="self-reflection" class="content-section hidden">
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- å·¦å´ï¼šåæ€å•é¡Œ -->
                    <div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">è‡ªæˆ‘åæ€</h2>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šå¤©åšå¾—å¥½çš„åœ°æ–¹</label>
                                    <textarea id="reflection-good" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="3" placeholder="è«‹å…·é«”æè¿°ï¼Œä¾‹å¦‚ï¼šä»Šå¤©å°ˆæ³¨åŠ›ä¸éŒ¯ï¼Œå®Œæˆäº†æ¯”é æœŸå¤šçš„ç·šä¸Šèª²ç¨‹ã€‚"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šå¤©å¯ä»¥æ”¹é€²çš„åœ°æ–¹</label>
                                    <textarea id="reflection-improve" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="3" placeholder="è«‹å…·é«”æè¿°ï¼Œä¸¦æ€è€ƒåŸå› ï¼Œä¾‹å¦‚ï¼šæ—©ä¸Šè¨˜æ†¶è¨“ç·´æ™‚å®¹æ˜“åˆ†å¿ƒï¼Œå¯èƒ½æ˜¯å› ç‚ºç¡çœ ä¸è¶³ã€‚"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šå¤©å­¸åˆ°çš„ç¶“é©—æˆ–ç™¼ç¾</label>
                                    <textarea id="reflection-lessons" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="3" placeholder="ä¾‹å¦‚ï¼šç™¼ç¾ç•ªèŒ„å·¥ä½œæ³•å°æˆ‘è¨˜è‹±æ–‡å–®å­—å¾ˆæœ‰å¹«åŠ©ã€‚"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">æ˜å¤©å¯ä»¥èª¿æ•´çš„è¡Œå‹•</label>
                                    <textarea id="reflection-tomorrow" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="3" placeholder="æ ¹æ“šä»Šå¤©çš„åæ€ï¼Œæ˜å¤©å¯ä»¥åšå“ªäº›èª¿æ•´ï¼Ÿä¾‹å¦‚ï¼šæ˜å¤©ææ—©åŠå°æ™‚ç¡è¦ºï¼Œçœ‹çœ‹æ˜¯å¦èƒ½æå‡æ—©ä¸Šçš„å°ˆæ³¨åŠ›ã€‚"></textarea>
                                </div>
                            </div>
                            <!-- åæ€æç¤º -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-5">
                    <h2 class="text-xl font-bold mb-4">åæ€æç¤º</h2>
                    <div class="space-y-3">
                        <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md">
                            <p class="text-sm text-blue-800 dark:text-blue-200">1. å°ˆæ³¨æ–¼ä½ æ‰€èƒ½æ§åˆ¶çš„äº‹æƒ…ï¼Œæ¥å—ä½ ç„¡æ³•æ§åˆ¶çš„ã€‚</p>
                        </div>
                        <div class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-md">
                            <p class="text-sm text-purple-800 dark:text-purple-200">2. å•è‡ªå·±ï¼šã€Œé€™ä»¶äº‹åœ¨äº”å¹´å¾Œé‚„é‡è¦å—ï¼Ÿã€</p>
                        </div>
                        <div class="p-3 bg-green-50 dark:bg-green-900/20 rounded-md">
                            <p class="text-sm text-green-800 dark:text-green-200">3. æ¯ä¸€å€‹æŒ‘æˆ°éƒ½æ˜¯æˆé•·çš„æ©Ÿæœƒã€‚</p>
                        </div>
                        <div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-md">
                            <p class="text-sm text-yellow-800 dark:text-yellow-200">4. æ…¶ç¥å°å‹åˆ©ï¼Œå®ƒå€‘æœƒç´¯ç©æˆå¤§æˆå°±ã€‚</p>
                        </div>
                        <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-md">
                            <p class="text-sm text-red-800 dark:text-red-200">5. è¨˜ä½ï¼Œå®Œç¾æ˜¯å¥½çš„æ•µäººã€‚ã€Œè¶³å¤ å¥½ã€å¾€å¾€å°±è¶³å¤ äº†ã€‚</p>
                        </div>
                    </div>
                </div>
                        </div>
                    </div>
                    
                    <!-- å³å´ï¼šæƒ…ç·’è¦ºå¯Ÿ -->
                    <div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6">
                            <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æƒ…ç·’è¦ºå¯Ÿ</h2>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šå¤©ä¸»è¦çš„æƒ…ç·’</label>
                                    <div class="grid grid-cols-3 sm:grid-cols-5 gap-2">
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="happy">
                                            <span class="text-xl">ğŸ˜Š</span>
                                            <span class="text-xs mt-1">é–‹å¿ƒ</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="calm">
                                            <span class="text-xl">ğŸ˜Œ</span>
                                            <span class="text-xs mt-1">å¹³éœ</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="tired">
                                            <span class="text-xl">ğŸ˜©</span>
                                            <span class="text-xs mt-1">ç–²æ†Š</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="anxious">
                                            <span class="text-xl">ğŸ˜Ÿ</span>
                                            <span class="text-xs mt-1">ç„¦æ…®</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="motivated">
                                            <span class="text-xl">ğŸ’ª</span>
                                            <span class="text-xs mt-1">æœ‰å‹•åŠ›</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="sad">
                                            <span class="text-xl">ğŸ˜¢</span>
                                            <span class="text-xs mt-1">æ‚²å‚·</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="angry">
                                            <span class="text-xl">ğŸ˜ </span>
                                            <span class="text-xs mt-1">æ†¤æ€’</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="excited">
                                            <span class="text-xl">ğŸ¤©</span>
                                            <span class="text-xs mt-1">èˆˆå¥®</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="confused">
                                            <span class="text-xl">ğŸ˜•</span>
                                            <span class="text-xs mt-1">å›°æƒ‘</span>
                                        </button>
                                        <button class="reflection-mood-btn p-2 rounded-lg flex flex-col items-center hover:bg-gray-100 dark:hover:bg-gray-700" data-mood="grateful">
                                            <span class="text-xl">ğŸ™</span>
                                            <span class="text-xs mt-1">æ„Ÿæ©</span>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">é¸æ“‡çš„æƒ…ç·’å¼·åº¦</label>
                                    <div id="selected-moods-container" class="space-y-2">
                                        <!-- é¸æ“‡çš„æƒ…ç·’å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                                        <div class="text-gray-500 dark:text-gray-400 text-sm italic">è«‹å¾ä¸Šæ–¹é¸æ“‡ä¸€æˆ–å¤šå€‹æƒ…ç·’</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">å¯èƒ½å½±éŸ¿æƒ…ç·’çš„äº‹ä»¶</label>
                                    <textarea id="emotion-triggers" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="3" placeholder="ä»Šå¤©ç™¼ç”Ÿäº†ä»€éº¼äº‹æƒ…å¯èƒ½å½±éŸ¿äº†æ‚¨çš„æƒ…ç·’ï¼Ÿä¾‹å¦‚ï¼šå®Œæˆäº†ä¸€å€‹é‡è¦çš„å·¥ä½œä»»å‹™ï¼Œèˆ‡æœ‹å‹é€²è¡Œäº†ä¸€æ¬¡æ„‰å¿«çš„è«‡è©±ç­‰"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                            <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">èªçŸ¥è¡Œç‚ºç™‚æ³• (CBT) è¨˜éŒ„</h2>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">ä»Šå¤©å‡ºç¾çš„è² é¢æƒ³æ³•</label>
                                    <textarea id="negative-thoughts" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="è¨˜éŒ„ä¸‹æ‚¨ä»Šå¤©æ„è­˜åˆ°çš„æ¯”è¼ƒå›°æ“¾çš„è² é¢æƒ³æ³•ï¼Œä¾‹å¦‚ï¼šã€Œæˆ‘ä»Šå¤©åˆæ²’æœ‰å®Œå…¨é”æˆç›®æ¨™ï¼Œæˆ‘çœŸæ˜¯å¤ªæ²’ç”¨äº†ã€‚ã€"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">è§¸ç™¼æƒ…å¢ƒ</label>
                                    <textarea id="trigger-situation" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="é€™å€‹æƒ³æ³•æ˜¯åœ¨ä»€éº¼æƒ…æ³ä¸‹å‡ºç¾çš„ï¼Ÿä¾‹å¦‚ï¼šåœ¨æ™šä¸Šå›é¡§ä»Šå¤©ç›®æ¨™å®Œæˆæƒ…æ³æ™‚"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">å°é€™å€‹æƒ³æ³•çš„åé§</label>
                                    <textarea id="thought-rebuttal" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="è«‹å˜—è©¦æŒ‘æˆ°é€™å€‹è² é¢æƒ³æ³•ï¼Œå°‹æ‰¾æ”¯æŒç›¸åè§€é»çš„è­‰æ“šã€‚ä¾‹å¦‚ï¼šã€Œé›–ç„¶ä»Šå¤©æ²’æœ‰å®Œå…¨é”æˆæ‰€æœ‰ç›®æ¨™ï¼Œä½†æˆ‘é‚„æ˜¯å®Œæˆäº†ä¸€äº›ï¼Œè€Œä¸”æˆ‘æ¯å¤©éƒ½åœ¨åŠªåŠ›é€²æ­¥ã€‚ã€"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">æ›´å¹³è¡¡çš„æƒ³æ³•</label>
                                    <textarea id="balanced-thought" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="ç”¨ä¸€å€‹æ›´ç†æ€§ã€æ›´ç©æ¥µçš„æƒ³æ³•ä¾†å–ä»£åŸä¾†çš„è² é¢æƒ³æ³•ã€‚ä¾‹å¦‚ï¼šã€Œæˆ‘æ­£åœ¨åŠªåŠ›æˆç‚ºæ›´å¥½çš„è‡ªå·±ï¼Œæ¯å¤©é€²æ­¥ä¸€é»é»å°±å·²ç¶“å¾ˆæ£’äº†ã€‚ã€"></textarea>
                                </div>
                            </div>
                            
                            <div class="mt-6 flex justify-end">
                                <button id="save-reflection" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">
                                    <i class="fas fa-save mr-1"></i>ä¿å­˜åæ€
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é€²åº¦å¯è¦–åŒ–å€å¡Š -->
            <div id="progress-visualization" class="content-section hidden">
                <!-- æ™‚é–“ç¯„åœé¸æ“‡ -->
                <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                    <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æ•¸æ“šç¯„åœ</h2>
                    <div class="flex flex-wrap gap-2">
                        <button class="date-range-btn px-4 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium" data-range="7">æœ€è¿‘7å¤©</button>
                        <button class="date-range-btn px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium" data-range="30">æœ€è¿‘30å¤©</button>
                        <button class="date-range-btn px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium" data-range="90">æœ€è¿‘90å¤©</button>
                        <div class="flex items-center space-x-2 ml-auto">
                            <label class="text-sm text-gray-700 dark:text-gray-300">è‡ªè¨‚ç¯„åœï¼š</label>
                            <input type="date" id="date-range-start" class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm">
                            <span class="text-gray-500">è‡³</span>
                            <input type="date" id="date-range-end" class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm">
                            <button id="apply-custom-range" class="px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm">æ‡‰ç”¨</button>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- å·¦å´ï¼šä»»å‹™å®Œæˆç‡åœ–è¡¨ -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æ¯æ—¥ä»»å‹™å®Œæˆç‡</h2>
                        <div class="h-64">
                            <canvas id="task-completion-chart"></canvas>
                        </div>
                    </div>
                    
                    <!-- å³å´ï¼šèƒ½é‡ç­‰ç´šèˆ‡å¿ƒæƒ…è¶¨å‹¢ -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">èƒ½é‡ç­‰ç´šè¶¨å‹¢</h2>
                        <div class="h-64">
                            <canvas id="energy-level-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
                    <!-- å·¦å´ï¼šç›®æ¨™é€²åº¦åœ–è¡¨ -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">ç›®æ¨™é€²åº¦åˆ†æ</h2>
                        <div class="h-64">
                            <canvas id="goal-progress-chart"></canvas>
                        </div>
                    </div>
                    
                    <!-- å³å´ï¼šæƒ…ç·’åˆ†ä½ˆ -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æƒ…ç·’åˆ†ä½ˆ</h2>
                        <div class="h-64">
                            <canvas id="mood-distribution-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- æ•¸æ“šæ´å¯Ÿèˆ‡å»ºè­° -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4 mt-6">
                    <h2 class="text-lg font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æ•¸æ“šæ´å¯Ÿèˆ‡å»ºè­°</h2>
                    <div id="insights-container" class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <p class="text-gray-500 dark:text-gray-400 text-center">è«‹å…ˆé¸æ“‡æ—¥æœŸç¯„åœä¸¦ä½¿ç”¨æ‡‰ç”¨ç¨‹å¼ä¸€æ®µæ™‚é–“ï¼Œä»¥ç²å–å€‹äººåŒ–çš„æ•¸æ“šæ´å¯Ÿã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨¡æ…‹æ¡† - æ–°å¢æ¯æ—¥ä»»å‹™ -->
    <div id="add-daily-task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md mx-4">
            <h2 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æ–°å¢æ¯æ—¥ä»»å‹™</h2>
            <form id="daily-task-form" class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md">
                <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">æ–°å¢ä»»å‹™</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ä»»å‹™åç¨±</label>
                        <input type="text" id="task-title" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-100" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">å„ªå…ˆç´š</label>
                        <select id="task-priority" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-100">
                            <option value="high">é«˜</option>
                            <option value="medium">ä¸­</option>
                            <option value="low">ä½</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">é¡åˆ¥</label>
                        <select id="task-category" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-100">
                            <option value="work">å·¥ä½œ</option>
                            <option value="study">å­¸ç¿’</option>
                            <option value="health">å¥åº·</option>
                            <option value="personal">å€‹äºº</option>
                            <option value="other">å…¶ä»–</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">å‚™è¨»</label>
                        <textarea id="task-notes" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-100" rows="2"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ç›¸é—œé€£çµ</label>
                        <input type="url" id="task-link" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-100">
                    </div>

                    
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="cancel-task" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">
                        å–æ¶ˆ
                    </button>
                    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg">
                        ç¢ºå®š
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ¨¡æ…‹æ¡† - æ–°å¢ç›®æ¨™ -->
    <div id="add-goal-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <h2 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æ–°å¢ç›®æ¨™</h2>
            <form id="goal-form">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-title">ç›®æ¨™æ¨™é¡Œ *</label>
                    <input type="text" id="goal-title" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" placeholder="è¼¸å…¥ç›®æ¨™æ¨™é¡Œ" required="">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-why">ç›®æ¨™åŸå›  (Why) *</label>
                    <textarea id="goal-why" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="ç‚ºä»€éº¼æƒ³é”æˆé€™å€‹ç›®æ¨™ï¼Ÿ" required=""></textarea>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-category">åˆ†é¡</label>
                        <select id="goal-category" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base">
                            <option value="work">å·¥ä½œ</option>
                            <option value="study">å­¸ç¿’</option>
                            <option value="health">å¥åº·</option>
                            <option value="personal">å€‹äºº</option>
                            <option value="other">å…¶ä»–</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-deadline">æˆªæ­¢æ—¥æœŸ</label>
                        <input type="date" id="goal-deadline" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base">
                    </div>
                </div>
                
                <div class="border-t dark:border-gray-700 my-4 pt-4">
                    <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-3">SMART ç›®æ¨™æ¡†æ¶</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-specific">å…·é«” (Specific) *</label>
                            <textarea id="goal-specific" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="å…·é«”æè¿°ä½ æƒ³é”æˆä»€éº¼ï¼Ÿ" required=""></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-measurable">å¯è¡¡é‡ (Measurable) *</label>
                            <textarea id="goal-measurable" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="å¦‚ä½•è¡¡é‡é€²åº¦å’ŒæˆåŠŸï¼Ÿ" required=""></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-achievable">å¯é”æˆ (Achievable) *</label>
                            <textarea id="goal-achievable" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="é€™å€‹ç›®æ¨™æ˜¯å¦å¯¦éš›å¯è¡Œï¼Ÿä½ æ“æœ‰å¯¦ç¾å®ƒçš„è³‡æºå’Œèƒ½åŠ›å—ï¼Ÿ" required=""></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-relevant">ç›¸é—œæ€§ (Relevant) *</label>
                            <textarea id="goal-relevant" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="é€™å€‹ç›®æ¨™èˆ‡ä½ çš„æ•´é«”ç™¼å±•æ–¹å‘æ˜¯å¦ä¸€è‡´ï¼Ÿ" required=""></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="goal-timebound">æ™‚é–“é™åˆ¶ (Time-bound) *</label>
                            <textarea id="goal-timebound" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="ä½ è¨ˆåŠƒåœ¨ä»€éº¼æ™‚é–“ç¯„åœå…§å®Œæˆç›®æ¨™ï¼Ÿ" required=""></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-2 mt-6">
                    <button type="button" id="cancel-goal" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg">å–æ¶ˆ</button>
                    <button type="submit" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">æ–°å¢</button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ¨¡æ…‹æ¡† - æ–°å¢å­ä»»å‹™ -->
    <div id="add-subtask-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md mx-4">
            <h2 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-400">æ–°å¢å­ä»»å‹™</h2>
            <form id="subtask-form">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="subtask-title">å­ä»»å‹™åç¨± *</label>
                    <input type="text" id="subtask-title" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" placeholder="è¼¸å…¥å­ä»»å‹™åç¨±" required="">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="subtask-description">æè¿° (é¸å¡«)</label>
                    <textarea id="subtask-description" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" rows="2" placeholder="å­ä»»å‹™çš„è£œå……èªªæ˜"></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="subtask-link">ç›¸é—œé€£çµ (é¸å¡«)</label>
                    <input type="url" id="subtask-link" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base" placeholder="https://example.com">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300" for="subtask-deadline">æˆªæ­¢æ—¥æœŸ (é¸å¡«)</label>
                    <input type="date" id="subtask-deadline" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 input-focus text-base">
                </div>
                <div class="flex justify-end space-x-2 mt-6">
                    <button type="button" id="cancel-subtask" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg">å–æ¶ˆ</button>
                    <button type="submit" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">æ–°å¢</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // æ•¸æ“šæ¨¡å‹
        let data = {
            tasks: {}, // æ¯æ—¥ä»»å‹™, æ ¼å¼: { date1: [...tasks], date2: [...tasks] }
            goals: [], // ç›®æ¨™åˆ—è¡¨
            subtasks: {}, // å­ä»»å‹™, æ ¼å¼: { goalId1: [...subtasks], goalId2: [...subtasks] }
            dailyState: {}, // æ¯æ—¥ç‹€æ…‹ (èƒ½é‡ç­‰ç´šã€å¿ƒæƒ…ç­‰), æ ¼å¼: { date1: {energy: 5, mood: 'happy'}, date2: {...} }
            reflections: {} // æ¯æ—¥åæ€, æ ¼å¼: { date1: {...reflection}, date2: {...reflection} }
        };

        // ç•¶å‰é¸æ“‡çš„æ—¥æœŸã€ç›®æ¨™ç­‰
        let currentDate = new Date();
        let currentGoalId = null;
        let isEditingGoal = false;
        let dateRangeForVisualization = 7; // é»˜èªé¡¯ç¤ºæœ€è¿‘7å¤©çš„æ•¸æ“š

        // æ¿€å‹µèªéŒ„åˆ—è¡¨
        const motivationalQuotes = [
           "ç›®æ¨™ä¸æ˜¯ç”¨ä¾†æŠ˜ç£¨è‡ªå·±çš„ï¼Œè€Œæ˜¯ç”¨ä¾†å¹«åŠ©è‡ªå·±æˆé•·çš„ã€‚éç¨‹ä¸­çš„æ¯ä¸€æ­¥éƒ½å¾ˆé‡è¦ï¼Œè«‹è¨˜å¾—ç‚ºæ¯å€‹å°é€²æ­¥è€Œæ…¶ç¥ã€‚ğŸŒ±",
        "å®Œæˆä»»ä½•é‡å¤§ç›®æ¨™éƒ½éœ€è¦æ™‚é–“ï¼Œè€å¿ƒå’Œæ±ºå¿ƒã€‚æ¯å¤©é€²æ­¥ä¸€é»é»ï¼Œæ—¥ç©æœˆç´¯ï¼Œçµ‚èƒ½å¯¦ç¾ç›®æ¨™ã€‚â³",
        "æœ‰æ™‚å€™ï¼Œå³ä½¿åªæ˜¯å …æŒæ—¥å¸¸å·¥ä½œï¼Œä¹Ÿæ˜¯ä¸€ç¨®æˆå°±ã€‚å–„å¾…è‡ªå·±ï¼Œç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›ã€‚ğŸ’ª",
        "ä¸è¦å› ç‚ºä¸€æ™‚çš„åœæ»¯è€Œæ”¾æ£„ï¼Œé€™åªæ˜¯æ—…é€”ä¸­çš„çŸ­æš«ä¼‘æ¯ã€‚ç¹¼çºŒå‰é€²ï¼Œä½ æœƒç™¼ç¾è‡ªå·±æ¯”æƒ³åƒçš„æ›´å …å¼·ã€‚ğŸŒŸ",
        "å¯¦ç¾ç›®æ¨™çš„éç¨‹ä¸­ï¼Œä½ å­¸åˆ°çš„é æ¯”æœ€çµ‚çµæœæ›´æœ‰åƒ¹å€¼ã€‚äº«å—é€™å€‹æ—…ç¨‹ï¼ğŸš€",
        "æŠŠå¤§ç›®æ¨™åˆ†è§£æˆå°æ­¥é©Ÿï¼Œæ¯å¤©å°ˆæ³¨ç•¶ä¸‹å¯ä»¥å®Œæˆçš„å°ä»»å‹™ï¼Œæ…¢æ…¢åœ°å°±æœƒçœ‹åˆ°å¤§æ”¹è®Šã€‚ğŸ“",
        "æ¯å¤©é€²æ­¥1%ï¼Œä¸€å¹´å¾Œä½ å°‡æˆç‚º37å€çš„è‡ªå·±ã€‚ä¸è¦å°çœ‹æ¯å¤©çš„å¾®å°é€²æ­¥ã€‚ğŸ“ˆ",
        "æˆåŠŸä¸¦éä¸€è¹´è€Œå°±ï¼Œè€Œæ˜¯ç”±ç„¡æ•¸å€‹å¾®å°çš„åŠªåŠ›æ‰€æ§‹æˆã€‚è®“æ¯ä¸€å€‹åŠªåŠ›éƒ½è®Šå¾—æœ‰æ„ç¾©ã€‚ğŸ’¡",
        "ä¸ç®¡å¤šå°çš„æ­¥ä¼ï¼Œéƒ½æ¯”åœæ»¯ä¸å‰å¼·ã€‚æ¯å¤©å‘å‰é‚å‡ºä¸€å°æ­¥ï¼Œä½ æœƒç™¼ç¾ï¼Œè·é›¢ç›®æ¨™è¶Šä¾†è¶Šè¿‘ã€‚ğŸ‘£",
        "è‡ªå¾‹æ˜¯ä¸€ç¨®åŠ›é‡ï¼Œèƒ½è®“ä½ åœ¨è¿·èŒ«ä¸­æ‰¾åˆ°æ–¹å‘ï¼Œè®“ä½ åœ¨å›°é›£ä¸­ä¿æŒå …æŒã€‚ğŸ”‘",
        "ç”Ÿæ´»ä¸­æ²’æœ‰å®Œç¾çš„æ™‚æ©Ÿï¼Œåªæœ‰ä½ ä¸æ–·åŠªåŠ›çš„éç¨‹ã€‚ä»Šå¤©çš„åŠªåŠ›ï¼Œå°‡æ±ºå®šæ˜å¤©çš„ä½ ã€‚â°",
        "æ¯ä¸€æ¬¡çš„åŠªåŠ›éƒ½æ˜¯ç‚ºäº†æ›´å¥½çš„æœªä¾†ï¼Œè«‹ç›¸ä¿¡ä½ çš„åŠªåŠ›å¾ä¾†ä¸æœƒç™½è²»ã€‚ğŸŒ…",
        "ç„¡è«–å¤šå°çš„é€²æ­¥ï¼Œéƒ½å€¼å¾—æ…¶ç¥ã€‚é€™æ˜¯å‘ç›®æ¨™é‚é€²çš„ä¸€éƒ¨åˆ†ã€‚ğŸ‰",
        "ç•¶ä½ è¦ºå¾—è‡ªå·±å¿«æ”¾æ£„çš„æ™‚å€™ï¼Œè¨˜ä½ç‚ºè‡ªå·±ä»˜å‡ºçš„åŠªåŠ›å·²ç¶“æœ‰äº†æˆæœã€‚ğŸ’ª",
        "æˆåŠŸä¸æ˜¯ä¸€ç¬é–“çš„æ±ºå®šï¼Œè€Œæ˜¯é•·æ™‚é–“çš„å …æŒèˆ‡åŠªåŠ›ã€‚ğŸ’¯",
        "ä½ ç¾åœ¨åšçš„æ¯ä¸€ä»¶äº‹ï¼Œéƒ½æ˜¯æˆç‚ºæ›´å¥½çš„è‡ªå·±çš„åŸºçŸ³ã€‚ğŸ”¨",
        "ç›®æ¨™æ˜¯æŒ‡å¼•ä½ çš„ç‡ˆå¡”ï¼Œä½†å …æŒæ˜¯è®“ä½ åˆ°é”çš„èˆ¹ã€‚â›µ",
        "ä¸è¦å› ç‚ºé‡åˆ°å›°é›£å°±æ‡·ç–‘è‡ªå·±ï¼Œè€Œæ‡‰è©²ç›¸ä¿¡å›°é›£åªæ˜¯æˆåŠŸçš„ä¸€éƒ¨åˆ†ã€‚ğŸ”¥",
        "æ¯ä¸€å¤©çš„åŠªåŠ›ï¼Œéƒ½æ˜¯ä½ é€²æ­¥çš„åŸºçŸ³ã€‚ä¸€æ­¥æ­¥ï¼Œæ¥è¿‘ä½ çš„å¤¢æƒ³ã€‚ğŸ§±",
        "åªæœ‰ç¶“æ­·éé¢¨é›¨ï¼Œæ‰èƒ½è¦‹åˆ°å½©è™¹ã€‚æ¯ä¸€å€‹æŒ‘æˆ°ï¼Œéƒ½æ˜¯è®“ä½ æ›´å¼·å¤§çš„æ©Ÿæœƒã€‚ğŸŒˆ",
        "æ²’æœ‰ä»€éº¼æ¯”æŒçºŒçš„åŠªåŠ›æ›´å€¼å¾—æŠ•è³‡ã€‚ä»Šå¤©çš„ä»˜å‡ºæ˜¯æ˜å¤©çš„å›å ±ã€‚â³",
        "ç›®æ¨™ä¸æ‡‰è©²æ˜¯å£“åŠ›ï¼Œè€Œæ˜¯ä¸€ç¨®æ¿€å‹µã€‚è®“å®ƒå¼•é ˜ä½ èµ°å‘æ›´é«˜çš„å·”å³°ã€‚ğŸš€",
        "æ¯ä¸€å€‹å°å°çš„æ”¹è®Šï¼Œéƒ½æ˜¯è‡ªæˆ‘æˆé•·çš„ä¸€æ­¥ã€‚è¨˜ä½ï¼ŒæˆåŠŸå§‹æ–¼å¾®å°çš„æ±ºå®šã€‚âš¡",
        "ä¸å¿…ç„¦æ…®æœªä¾†ï¼Œå°ˆæ³¨æ–¼ç•¶ä¸‹ï¼Œå°‡ä»Šå¤©çš„äº‹æƒ…åšå¥½ï¼Œä½ å·²ç¶“åœ¨èµ°å‘æˆåŠŸçš„è·¯ä¸Šã€‚ğŸ”®",
        "åªè¦ä½ ä¸æ”¾æ£„ï¼Œä½ å°±æ°¸é åœ¨è·¯ä¸Šï¼Œæ°¸é æœ‰æ©Ÿæœƒé”æˆç›®æ¨™ã€‚ğŸŒŸ",
        "è«‹å°è‡ªå·±æœ‰ä¿¡å¿ƒï¼Œä½ çš„æ½›åŠ›é é è¶…éä½ è‡ªå·±çš„æƒ³åƒã€‚ğŸ’«",
        "æˆç‚ºä½ æƒ³æˆç‚ºçš„äººï¼Œä¸æ˜¯å› ç‚ºä½ æœ‰æ¢ä»¶ï¼Œè€Œæ˜¯å› ç‚ºä½ å …æŒä¸æ‡ˆã€‚ğŸ’¡",
        "ç„¡è«–ä½ ç¾åœ¨çš„é€²åº¦å¦‚ä½•ï¼Œå§‹çµ‚è¨˜ä½ï¼Œä½ æ¯”ä½ ä»¥ç‚ºçš„é‚„è¦å¼·å¤§ã€‚âš”ï¸",
        "æ¯ä¸€æ¬¡çš„å¤±æ•—ï¼Œéƒ½æ˜¯å­¸ç¿’çš„å¥‘æ©Ÿã€‚ä¸è¦å› ç‚ºå®ƒå€‘è€Œåœä¸‹ä¾†ã€‚ğŸ› ï¸",
        "å …æŒè®“ä½ æ›´åŠ æˆç†Ÿï¼Œæ™ºæ…§å’Œè‡ªä¿¡ä¹Ÿåœ¨é€™å€‹éç¨‹ä¸­ç´¯ç©ã€‚ğŸŒ±",
        "ç›®æ¨™ä¸è©²è®“ä½ ç„¦æ…®ï¼Œæ‡‰è©²æ¿€ç™¼ä½ æ‰¾åˆ°å¯¦ç¾å®ƒçš„å‹•åŠ›ã€‚ğŸ’¥",
        "æ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„é–‹å§‹ï¼Œè®“æ¯ä¸€å¤©çš„åŠªåŠ›ç©ç´¯æˆæ”¹è®Šçš„åŠ›é‡ã€‚â°",
        "ä½ çš„ç›®æ¨™å°±åƒä¸€å€‹æ–¹å‘ç›¤ï¼Œåªè¦ä¸æ”¾æ£„ï¼Œå°±èƒ½å¼•å°ä½ é”åˆ°å¤¢æƒ³çš„å½¼å²¸ã€‚ğŸš—",
        "æ¯ä¸€æ­¥éƒ½åœ¨é€²æ­¥ï¼Œç„¡è«–å¤šæ…¢ï¼Œéƒ½åœ¨æ¥è¿‘çµ‚é»ã€‚â›°ï¸",
        "è‡ªå¾‹æ˜¯ä¸€ç¨®èƒ½åŠ›ï¼Œä¹Ÿæ˜¯ä¸€ç¨®ç¾å¾·ï¼Œå®ƒæœƒè®“ä½ çš„äººç”Ÿå……æ»¿ç©©å®šå’ŒæˆåŠŸã€‚ğŸ’ª",
        "è®“æ¯ä¸€æ¬¡åŠªåŠ›éƒ½å……æ»¿æ„ç¾©ï¼Œç„¡è«–çµæœå¦‚ä½•ï¼Œéç¨‹æœ¬èº«å°±æ˜¯ä¸€ç¨®æˆå°±ã€‚ğŸ¯",
        "åªè¦ä¸åœåœ°å­¸ç¿’å’Œé€²æ­¥ï¼ŒæˆåŠŸæ˜¯å¿…ç„¶çš„ã€‚ğŸ“š",
        "æ¯ä¸€å€‹éŒ¯èª¤éƒ½æ˜¯æˆåŠŸçš„ä¸€éƒ¨åˆ†ï¼Œå­¸æœƒå¾ä¸­æ±²å–æ•™è¨“ã€‚ğŸ“",
        "åˆ¥æ€¥æ–¼çœ‹åˆ°æˆæœï¼Œäº«å—é€™å€‹éç¨‹ï¼Œå› ç‚ºéç¨‹æœ¬èº«æœƒå¸¶ä¾†æœ€å¤§çš„æˆé•·ã€‚ğŸŒ»",
        "ç›®æ¨™æ˜¯ç‚ºäº†è®“ä½ æˆç‚ºæ›´å¥½çš„è‡ªå·±ï¼Œè€Œä¸æ˜¯è®“ä½ æ„Ÿåˆ°å£“åŠ›ã€‚ğŸˆ",
        "æŠŠæ³¨æ„åŠ›æ”¾åœ¨æ¯ä¸€å€‹å°çš„é€²æ­¥ä¸Šï¼Œè€Œä¸æ˜¯é™ä¸å¯åŠçš„æœ€çµ‚ç›®æ¨™ã€‚ğŸ”",
        "å¤±æ•—ä¸¦ä¸å¯æ€•ï¼Œæ”¾æ£„æ‰æ˜¯æœ€å¤§çš„å¤±æ•—ã€‚ğŸ’¥",
        "ä½ åšçš„æ¯ä¸€é»åŠªåŠ›ï¼Œéƒ½æ˜¯ç‚ºäº†æœªä¾†çš„ä½ é‹ªè·¯ã€‚ğŸ›£ï¸",
        "æŠŠä»Šå¤©åšå¥½ï¼Œä½ å°±å·²ç¶“èµ°åœ¨æˆåŠŸçš„é“è·¯ä¸Šã€‚ğŸš¶â€â™€ï¸",
        "ç›®æ¨™æ°¸é æ˜¯ç‚ºäº†æŒ‡å¼•ä½ èµ°å‘æ›´å¥½çš„ç”Ÿæ´»ï¼Œè€Œä¸æ˜¯è®“ä½ æŸç¸›ã€‚ğŸš€",
        "äººç”Ÿçš„æˆåŠŸï¼Œæ˜¯ç”±ä¸€æ¬¡åˆä¸€æ¬¡çš„å°æ­¥é©Ÿå’Œå …æŒæ§‹æˆçš„ã€‚ğŸ—ï¸",
        "ç•¶ä½ é–‹å§‹èµ°å‹•ï¼Œè·¯å°±æœƒè‡ªå·±å‡ºç¾ã€‚é‚å‡ºç¬¬ä¸€æ­¥ï¼Œè®“è‡ªå·±é€²æ­¥ã€‚ğŸ‘£",
        "ç•¶ä½ æ”¾ä¸‹ææ‡¼ï¼Œå‹‡æ•¢å»åšï¼Œæ¯ä¸€æ­¥éƒ½æœƒå‘ç›®æ¨™é è¿‘ã€‚ğŸ¦‹",
        "æˆåŠŸä¸æ˜¯ç­‰ä¾†çš„ï¼Œè€Œæ˜¯é å …æŒå’ŒåŠªåŠ›é€æ­¥é”æˆçš„ã€‚ğŸ¯",
        "æˆåŠŸæ˜¯ç”±ç„¡æ•¸å€‹å°æˆå°±å †ç Œè€Œæˆï¼Œä»Šå¤©çš„åŠªåŠ›ï¼Œæ˜¯æ˜å¤©çš„å‹åˆ©ã€‚ğŸ†",
        "æ¯ä¸€æ¬¡çš„åŠªåŠ›ï¼Œéƒ½æ˜¯ç‚ºäº†è®“è‡ªå·±è®Šå¾—æ›´å¥½ã€‚ä¸è¦æ”¾æ£„ï¼Œä½ æ­£åœ¨é€²æ­¥ã€‚ğŸŒŸ",
        "ä¸è¦å®³æ€•å¤±æ•—ï¼Œå®ƒæ˜¯æˆåŠŸçš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸€æ¬¡çš„å¤±æ•—ï¼Œéƒ½æ˜¯å‘æˆåŠŸæ›´è¿‘ä¸€æ­¥ã€‚ğŸš€"
        ];

        // å®Œæˆä»»å‹™æ™‚çš„éš¨æ©Ÿè¨Šæ¯
        const completionMessages = {
            dailyTask: [
                "æˆ‘ä»Šå¤©é¸æ“‡äº†è¡Œå‹•è€Œéæ‹–å»¶ï¼Œé€™æœ¬èº«å°±æ˜¯å‹åˆ©ã€‚ğŸ’ª",
                "æ¯å€‹å®Œæˆçš„å°ä»»å‹™éƒ½æ˜¯æˆ‘æ„å¿—åŠ›çš„è­‰æ˜ï¼Œåšå¾—å¥½ï¼ğŸ‘",
                "æˆ‘éµå®ˆäº†å°è‡ªå·±çš„æ‰¿è«¾ï¼Œé€™å±•ç¾äº†æˆ‘çš„è‡ªå¾‹å’Œæ±ºå¿ƒã€‚ğŸŒŸ",
                "æˆ‘æ­£åœ¨å»ºç«‹æ–°çš„ç¥ç¶“è·¯å¾‘ï¼Œæ¯æ¬¡å®Œæˆä»»å‹™éƒ½åœ¨å¼·åŒ–ç©æ¥µçš„ç¿’æ…£ã€‚ğŸ§ ",
                "å³ä½¿åªæ˜¯ä¸€é æ›¸æˆ–ä¸€åˆ†é˜å†¥æƒ³ï¼Œæˆ‘é¸æ“‡äº†é€²æ­¥è€ŒéåŸåœ°ä¸å‹•ã€‚ğŸ“–ğŸ§˜",
                "ä»Šå¤©çš„å°æˆå°±æ˜¯æ˜å¤©å¤§æˆå°±çš„åŸºçŸ³ï¼Œæˆ‘æ­£åœ¨æ‰“å¥½åŸºç¤ã€‚ğŸ—ï¸",
                "æˆ‘æ²’æœ‰å°‹æ‰¾å®Œç¾çš„æ™‚æ©Ÿï¼Œè€Œæ˜¯å‰µé€ äº†è¡Œå‹•çš„æ™‚åˆ»ã€‚â³",
                "å®Œæˆé€™å€‹ä»»å‹™è­‰æ˜æˆ‘æ¯”æ˜¨å¤©çš„è‡ªå·±æ›´å¼·å¤§ä¸€é»ã€‚ğŸ’¥",
                "æˆ‘é¸æ“‡äº†é¢å°è€Œéé€ƒé¿ï¼Œé€™æ˜¯å‹‡æ°£çš„è¡¨ç¾ã€‚ğŸ¦¸",
                "æ¯å€‹å·²å®Œæˆçš„é …ç›®éƒ½æ˜¯æˆ‘æŒæ§è‡ªå·±ç”Ÿæ´»çš„è­‰æ“šï¼Œæˆ‘ç‚ºè‡ªå·±æ„Ÿåˆ°é©•å‚²ã€‚ğŸ†",
                "æˆ‘ä»Šå¤©å®Œæˆäº†æ‰€æœ‰è¨ˆåŠƒä»»å‹™ï¼Œé€™è­‰æ˜æˆ‘çš„åŸ·è¡ŒåŠ›æ­£åœ¨æå‡ï¼ğŸš€",
                "æ¯ä¸€å€‹å®Œæˆçš„å°ä»»å‹™éƒ½æ˜¯æˆ‘è‡ªå¾‹ä¹‹è·¯ä¸Šçš„å‹åˆ©ã€‚ğŸ†",
                "æˆ‘æ­£åœ¨å»ºç«‹ä¸€è‡´æ€§ï¼Œé€™æ¯”å®Œç¾æ›´é‡è¦ã€‚âœ¨",
                "ä»Šå¤©çš„æˆ‘æ¯”æ˜¨å¤©æ›´è‡ªå¾‹ï¼Œæˆ‘ç‚ºæ­¤æ„Ÿåˆ°è‡ªè±ªï¼ğŸŒŸ",
                "æˆ‘æˆåŠŸåœ°ç®¡ç†äº†æˆ‘çš„æ™‚é–“ï¼Œé€™æ˜¯æˆ‘èƒ½åŠ›çš„é«”ç¾ã€‚ğŸ¯",
                "æ¯å€‹å®Œæˆçš„ä»»å‹™éƒ½è­‰æ˜æˆ‘èƒ½å¤ ä¿¡å®ˆå°è‡ªå·±çš„æ‰¿è«¾ã€‚ğŸ”",
                "æˆ‘æ­£åœ¨åŸ¹é¤ŠæŒçºŒè¡Œå‹•çš„èƒ½åŠ›ï¼Œé€™å°‡å¸¶ä¾†é•·é çš„æ”¹è®Šã€‚ğŸŒ³",
                "ä»Šå¤©çš„åŠªåŠ›ç‚ºæ˜å¤©çš„æˆåŠŸå¥ å®šäº†åŸºç¤ã€‚ğŸ—ï¸",
                "æˆ‘ä¸éœ€è¦å®Œç¾ï¼Œæˆ‘åªéœ€è¦æŒçºŒå‰é€²ã€‚ğŸš¶â™‚ï¸",
                "æˆ‘çš„è‡ªå¾‹èƒ½åŠ›æ­£åœ¨æ—¥æ¼¸å¢å¼·ï¼Œæˆ‘èƒ½æ„Ÿå—åˆ°é€™ç¨®é€²æ­¥ã€‚ğŸ“Š",
                "å®Œæˆä»Šå¤©çš„ä»»å‹™æ¸…å–®è®“æˆ‘æ„Ÿåˆ°å……å¯¦å’Œæ»¿è¶³ã€‚ğŸ˜Œ",
                "æˆ‘çš„è¡Œå‹•è­‰æ˜äº†æˆ‘å°è‡ªå·±ç›®æ¨™çš„æ‰¿è«¾ã€‚ğŸ›¡ï¸",
                "æˆ‘æœ‰èƒ½åŠ›åšåˆ°æˆ‘è¨­å®šçš„ç›®æ¨™ï¼Œä»Šå¤©å†æ¬¡è­‰æ˜äº†é€™ä¸€é»ï¼ğŸ’",
                "æˆ‘çš„è‡ªå¾‹ä¸ä¾è³´æ–¼å‹•åŠ›ï¼Œè€Œæ˜¯æºæ–¼æˆ‘çš„æ‰¿è«¾ã€‚ğŸ”§",
                "ä»Šå¤©çš„ä»»å‹™å®Œæˆæƒ…æ³åæ˜ äº†æˆ‘å…§åœ¨çš„åŠ›é‡ã€‚ğŸ’¥",
                "æˆ‘æ­£åœ¨å»ºç«‹è‰¯å¥½çš„ç¿’æ…£ï¼Œé€™äº›ç¿’æ…£å°‡å¡‘é€ æˆ‘çš„æœªä¾†ã€‚ğŸŒŸ",
                "å³ä½¿æ˜¯å°ä»»å‹™çš„å®Œæˆä¹Ÿå€¼å¾—æ…¶ç¥ï¼Œå®ƒå€‘å…±åŒæ§‹æˆäº†å¤§çš„æˆå°±ã€‚ğŸŠ",
                "æˆ‘çš„å°ˆæ³¨åŠ›å’ŒåŸ·è¡ŒåŠ›æ­£åœ¨æå‡ï¼Œé€™æ˜¯æˆ‘èƒ½æ„Ÿå—åˆ°çš„è®ŠåŒ–ï¼ğŸ’¡",
                "æˆ‘ç‚ºè‡ªå·±ä»Šå¤©çš„è‡ªå¾‹æ„Ÿåˆ°é©•å‚²ã€‚âœ¨",
                "æ¯å®Œæˆä¸€å€‹ä»»å‹™ï¼Œæˆ‘å°±æ›´æ¥è¿‘æˆ‘ç†æƒ³ä¸­çš„è‡ªå·±ã€‚ğŸ‘¤",
                "æˆ‘åšåˆ°äº†ä»Šå¤©çš„æ‰¿è«¾ï¼Œé€™æ˜¯æˆ‘å€¼å¾—ä¿¡è³´çš„è­‰æ˜ã€‚ğŸ¤",
                "æˆ‘èƒ½å¤ åœ¨å›°é›£ä¸­ä¿æŒè¡Œå‹•ï¼Œé€™å±•ç¤ºäº†æˆ‘çš„éŸŒæ€§ã€‚â›“ï¸",
                "ä»Šå¤©çš„æˆåŠŸåŸ·è¡Œå»ºç«‹äº†æ˜å¤©æ›´å¼·å¤§çš„åŸºç¤ã€‚ğŸŒ…",
                "æˆ‘çš„è‡ªå¾‹æ˜¯ä¸€ç¨®é¸æ“‡ï¼Œä»Šå¤©æˆ‘å†æ¬¡åšå‡ºäº†æ­£ç¢ºçš„é¸æ“‡ã€‚âš–ï¸",
                "æˆ‘èƒ½å¤ å …æŒæˆ‘çš„è¨ˆåŠƒï¼Œé€™æ˜¯æˆ‘æ€§æ ¼ä¸­çš„å¼·é …ã€‚ğŸ’ª",
                "æ¯ä¸€å€‹å®Œæˆçš„ä»»å‹™éƒ½æ˜¯å°è‡ªæˆ‘æ‡·ç–‘çš„æœ‰åŠ›åæ“Šã€‚ğŸ¯",
                "æˆ‘æ­£åœ¨é€šéæŒçºŒçš„å°è¡Œå‹•å‰µé€ å·¨å¤§çš„è®ŠåŒ–ã€‚ğŸŒªï¸",
                "æˆ‘çš„è‡ªå¾‹èƒ½åŠ›æ­£åœ¨æˆç‚ºæˆ‘æ€§æ ¼çš„ä¸€éƒ¨åˆ†ã€‚ğŸ§©",
                "æˆ‘ä»Šå¤©çš„è¡¨ç¾è­‰æ˜æˆ‘èƒ½å¤ ç®¡ç†è‡ªå·±çš„ç”Ÿæ´»ã€‚ğŸ—ºï¸",
                "æˆ‘æ­£åœ¨å‰µé€ æˆ‘æƒ³è¦çš„ç”Ÿæ´»ï¼Œä¸€å€‹ä»»å‹™ä¸€æ¬¡ã€‚âœ¨",
            ],
            subtask: [
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆè®“æˆ‘é›¢æœ€çµ‚ç›®æ¨™åˆè¿‘äº†ä¸€æ­¥ï¼Œå€¼å¾—æ…¶ç¥ï¼ğŸ‰",
                "æˆ‘æ­£åœ¨æ‹†è§£å¤§è±¡ï¼Œä¸€æ¬¡åƒä¸€å£ï¼Œé€™è­‰æ˜äº†æˆ‘çš„ç­–ç•¥æ€ç¶­ã€‚ğŸ˜",
                "å®Œæˆé€™å€‹ç’°ç¯€è­‰æ˜æˆ‘æœ‰èƒ½åŠ›æŒçºŒå‰é€²ï¼Œè€Œä¸åƒ…åƒ…æ˜¯é–‹å§‹ã€‚ğŸš¶",
                "æˆ‘ä¸åƒ…æœ‰é¡˜æ™¯ï¼Œé‚„æœ‰åŸ·è¡ŒåŠ›ï¼Œé€™æ˜¯è¨±å¤šäººæ‰€ç¼ºä¹çš„å“è³ªã€‚ğŸ‘ï¸",
                "é€™å€‹å­ä»»å‹™å¯èƒ½çœ‹ä¼¼å¾®å°ï¼Œä½†å®ƒæ˜¯æˆ‘æˆåŠŸæ‹¼åœ–ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç‰‡ã€‚ğŸ§©",
                "æˆ‘æ­£åœ¨ç”¨è¡Œå‹•è¨¼æ˜ï¼šé€²æ­¥ä¸éœ€è¦å®Œç¾ï¼Œåªéœ€è¦æŒçºŒã€‚ğŸ“ˆ",
                "æ¯å€‹å­ä»»å‹™éƒ½åœ¨éå›ºæˆ‘çš„æŠ€èƒ½å’Œè‡ªä¿¡ï¼Œæˆ‘æ­£åœ¨æˆé•·ã€‚ğŸŒ±",
                "é€™ä¸åƒ…æ˜¯ä¸€å€‹è¢«å‹¾æ‰çš„é …ç›®ï¼Œè€Œæ˜¯æˆ‘å …éŸŒæ€§æ ¼çš„é«”ç¾ã€‚âœ”ï¸",
                "æˆ‘è§£æ±ºäº†é€™å€‹éƒ¨åˆ†ï¼Œé€™è­‰æ˜æˆ‘æœ‰é¢å°æ›´å¤§æŒ‘æˆ°çš„èƒ½åŠ›ã€‚ğŸ› ï¸",
                "å³ä½¿é‡åˆ°é˜»åŠ›ï¼Œæˆ‘ä¾ç„¶å®Œæˆäº†é€™å€‹ç’°ç¯€ï¼Œé€™é¡¯ç¤ºäº†æˆ‘çš„éŸŒæ€§ã€‚ğŸ’ª",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆå°‡æˆ‘å¸¶å¾—æ›´æ¥è¿‘æˆ‘çš„å¤§ç›®æ¨™ï¼ğŸ¯",
                "æˆ‘å‰›å®Œæˆçš„æ­¥é©Ÿæ˜¯æˆ‘æˆåŠŸä¹‹è·¯ä¸Šçš„é‡è¦ä¸€æ­¥ã€‚ğŸ”¨",
                "æ¯å€‹å­ä»»å‹™çš„å®Œæˆéƒ½è­‰æ˜æˆ‘çš„å¤§ç›®æ¨™æ˜¯å¯é”æˆçš„ã€‚ğŸ”",
                "æˆ‘æ­£åœ¨ç³»çµ±æ€§åœ°å¯¦ç¾æˆ‘çš„å¤¢æƒ³ï¼Œä¸€æ­¥ä¸€æ­¥åœ°ã€‚ğŸ‘£",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆå±•ç¤ºäº†æˆ‘çš„æ–¹æ³•è«–æ˜¯æœ‰æ•ˆçš„ã€‚ğŸ”§",
                "æˆ‘èƒ½å¤ åˆ†è§£ä¸¦å¾æœè¤‡é›œçš„ç›®æ¨™ï¼Œé€™æ˜¯ä¸€ç¨®å¼·å¤§çš„èƒ½åŠ›ï¼ğŸ’¡",
                "æˆ‘é›¢æˆ‘çš„ç›®æ¨™æ›´è¿‘äº†ä¸€æ­¥ï¼Œé€™æ˜¯å¯¦å¯¦åœ¨åœ¨çš„é€²å±•ã€‚ğŸ“Š",
                "æˆ‘çš„ç­–ç•¥æ­£åœ¨ç™¼æ®ä½œç”¨ï¼Œæˆ‘èƒ½çœ‹åˆ°çµæœã€‚âœ¨",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆç‚ºæˆ‘çš„ç›®æ¨™å¥ å®šäº†å …å¯¦çš„åŸºç¤ã€‚ğŸ§±",
                "æˆ‘æ“…é•·å°‡å¤§ç›®æ¨™åˆ†è§£æˆå¯ç®¡ç†çš„éƒ¨åˆ†ï¼Œä¸¦é€ä¸€å®Œæˆã€‚ğŸ’ª",
                "æˆ‘çš„é€²å±•æ˜¯å¯¦éš›å¯è¦‹çš„ï¼Œé€™å€‹å­ä»»å‹™å°±æ˜¯è­‰æ˜ï¼ğŸ¯",
                "æˆ‘èƒ½å¤ åœ¨ä¸åŒçš„å­ä»»å‹™ä¹‹é–“ä¿æŒå°ˆæ³¨ï¼Œé€™æ˜¯æˆåŠŸçš„é—œéµã€‚ğŸ”‘",
                "æˆ‘æ­£åœ¨å»ºç«‹å®Œæˆå¤§ç›®æ¨™æ‰€éœ€çš„å‹•åŠ›ã€‚ğŸ’¥",
                "æ¯å€‹å­ä»»å‹™çš„å®Œæˆéƒ½æ˜¯æˆ‘èƒ½åŠ›çš„é«”ç¾ã€‚ğŸŒŸ",
                "æˆ‘æ­£åœ¨è­‰æ˜æˆ‘å¯ä»¥é•·æœŸæŠ•å…¥æ–¼é‡è¦çš„ç›®æ¨™ã€‚ğŸŒ³",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆæ˜¯æˆ‘æ•´é«”è¨ˆåŠƒçš„é‡è¦çµ„æˆéƒ¨åˆ†ã€‚ğŸ§©",
                "æˆ‘çš„è€å¿ƒå’Œå …æŒæ­£åœ¨å¾—åˆ°å›å ±ã€‚âŒ›",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆæ˜¯æˆ‘å°è‡ªå·±æ‰¿è«¾çš„å±¥è¡Œã€‚ğŸ¤²",
                "æˆ‘å…·æœ‰å®Œæˆè¤‡é›œç›®æ¨™çš„èƒ½åŠ›ï¼Œé€™å€‹å­ä»»å‹™å°±æ˜¯è­‰æ˜ï¼ğŸ“",
                "æˆ‘æ­£åœ¨ä¸€æ­¥æ­¥åœ°å°‡æˆ‘çš„æƒ³æ³•è®Šç‚ºç¾å¯¦ã€‚ğŸ‘£",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆç‚ºæˆ‘çš„å¤§ç›®æ¨™æ³¨å…¥äº†æ–°çš„èƒ½é‡ï¼ğŸ’¥",
                "æˆ‘èƒ½å¤ åœ¨çœ‹ä¸åˆ°ç«‹å³å›å ±çš„æƒ…æ³ä¸‹ä¿æŒæŠ•å…¥ã€‚ğŸŒ ",
                "æˆ‘æ­£åœ¨å»ºç«‹é”æˆç›®æ¨™æ‰€éœ€çš„æŠ€èƒ½å’Œç¿’æ…£ã€‚ğŸ“",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆè­‰æ˜äº†æˆ‘çš„æ–¹å‘æ˜¯æ­£ç¢ºçš„ã€‚ğŸ§­",
                "æˆ‘çš„ç³»çµ±æ€§æ–¹æ³•æ­£åœ¨å¸¶ä¾†å¯¦éš›çš„çµæœã€‚âš™ï¸",
                "æˆ‘æ­£åœ¨æˆç‚ºä¸€å€‹å–„æ–¼å®Œæˆç›®æ¨™çš„äººï¼ğŸ†",
                "é€™å€‹å­ä»»å‹™çš„å®Œæˆè®“æˆ‘æ›´æœ‰ä¿¡å¿ƒé¢å°å‰©ä¸‹çš„æŒ‘æˆ°ã€‚ğŸ’ª",
                "æˆ‘çš„é€²å±•å¯èƒ½ç·©æ…¢ä½†ç©©å®šï¼Œé€™æ˜¯æˆåŠŸçš„ç¯€å¥ã€‚â³",
                "æˆ‘æ­£åœ¨åŸ¹é¤Šå“è¶Šçš„åŸ·è¡Œèƒ½åŠ›ï¼Œé€™å€‹å­ä»»å‹™å°±æ˜¯è­‰æ˜ï¼ğŸ’¼",
    "æˆ‘çš„å¤§ç›®æ¨™æ­£åœ¨é€šéé€™äº›å°æ­¥é©Ÿè®Šå¾—æ›´åŠ çœŸå¯¦ã€‚ğŸ—ºï¸"
            ],
            goalComplete: [
                "100%ï¼æˆ‘ä¸åƒ…è¨­å®šäº†ç›®æ¨™ï¼Œé‚„å…¨åŠ›ä»¥èµ´åœ°å¯¦ç¾äº†å®ƒã€‚é€™å°±æ˜¯æˆ‘çš„å¯¦åŠ›ã€‚ğŸ’¯",
                "å®Œæ•´åœ°åŸ·è¡Œäº†è¨ˆåŠƒï¼Œé€™è­‰æ˜æˆ‘å…·å‚™äº†é è¶…å¸¸äººçš„æ±ºå¿ƒå’ŒåŸ·è¡ŒåŠ›ã€‚ğŸ“Š",
                "çœ‹çœ‹é€™å€‹å®Œæ•´çš„é€²åº¦è¡¨ï¼æˆ‘è­‰æ˜äº†è‡ªå·±æ˜¯è¨€å‡ºå¿…è¡Œçš„äººã€‚ğŸ“",
                "å¾0åˆ°100%ï¼Œæˆ‘ç”¨è¡Œå‹•é‡æ–°å®šç¾©äº†è‡ªå·±çš„å¯èƒ½æ€§ç•Œé™ã€‚ğŸš€",
                "é€™ä¸åƒ…æ˜¯ä¸€å¼µå®Œæˆçš„æ¸…å–®ï¼Œè€Œæ˜¯æˆ‘å€‹äººæˆé•·å’Œè‡ªå¾‹çš„è¦‹è­‰ã€‚ğŸ“œ",
                "æˆ‘å…‹æœäº†æ‰€æœ‰çš„å…§åœ¨é˜»åŠ›ï¼Œé”æˆäº†å…¨éƒ¨ç›®æ¨™ã€‚é€™ç¨®èƒ½åŠ›æœƒè½‰åŒ–ç‚ºç”Ÿæ´»çš„å„å€‹æ–¹é¢ã€‚ğŸŒˆ",
                "100%å®Œæˆç‡ï¼æˆ‘å·²ç¶“è­‰æ˜è‡ªå·±èƒ½å¤ åˆ¶å®šè¨ˆåŠƒä¸¦å®Œå…¨åŸ·è¡Œå®ƒã€‚ğŸ¯",
                "æˆ‘æ²’æœ‰æ‰¾è—‰å£ï¼Œæ²’æœ‰åŠé€”è€Œå»¢ï¼Œè€Œæ˜¯å…¨åŠ›ä»¥èµ´ã€‚é€™ç¨®æˆå°±æ„Ÿç„¡å¯æ›¿ä»£ã€‚ğŸ…",
                "é€™å¼µå®Œæ•´çš„é€²åº¦è¡¨ä»£è¡¨æˆ‘é¸æ“‡äº†å“è¶Šè€Œéå¹³åº¸ã€‚ç‚ºè‡ªå·±å–å½©ï¼ğŸ¥‚",
                "å¾è¨ˆåŠƒåˆ°å®Œæˆï¼Œæˆ‘æŒæ§äº†æ•´å€‹éç¨‹ã€‚é€™ç¨®æŒæ§åŠ›æœƒæŒçºŒå½±éŸ¿æˆ‘æœªä¾†çš„æˆå°±ã€‚ğŸ•¹ï¸",
                "æˆ‘å¯¦ç¾äº†100%çš„ç›®æ¨™é€²åº¦ï¼Œé€™æ˜¯æˆ‘è‡ªå¾‹å’Œå …æŒçš„å®Œç¾è­‰æ˜ï¼ğŸ…",
                "å¾0%åˆ°100%ï¼Œæˆ‘èµ°å®Œäº†æ•´å€‹æ—…ç¨‹ï¼Œé€™æ˜¯æˆ‘èƒ½åŠ›çš„é«”ç¾ï¼ğŸš¶",
                "æˆ‘å®Œæˆäº†æ‰€æœ‰çš„é€²åº¦æŒ‡æ¨™ï¼Œé€™è­‰æ˜æˆ‘èƒ½å¤ å¾é ­åˆ°å°¾åŸ·è¡Œè¨ˆåŠƒï¼ğŸ“‹",
                "100%çš„å®Œæˆç‡ä»£è¡¨äº†æˆ‘å°è‡ªå·±æ‰¿è«¾çš„å®Œå…¨å…Œç¾ï¼ğŸ¤",
                "æˆ‘è­‰æ˜äº†æˆ‘ä¸åªæ˜¯é–‹å§‹è€…ï¼Œæ›´æ˜¯å®Œæˆè€…ï¼ğŸ",
                "é€™å€‹100%çš„è¿½è¹¤è¡¨æ˜¯æˆ‘è‡ªå¾‹å’Œå°ˆæ³¨çš„è¦–è¦ºè­‰æ˜ï¼ğŸ“Š",
                "æˆ‘æˆåŠŸåœ°å°‡ç›®æ¨™å¾é¡˜æœ›è½‰è®Šç‚ºç¾å¯¦ï¼ğŸŒŸ",
                "é€™å€‹å®Œæ•´çš„é€²åº¦è¡¨ä»£è¡¨äº†æˆ‘çš„æ±ºå¿ƒå’Œæ¯…åŠ›ï¼ğŸ’ª",
                "æˆ‘èƒ½å¤ å…¨é¢åŸ·è¡Œè¨ˆåŠƒï¼Œé€™æ˜¯æˆ‘ç³»çµ±æ€§æ€ç¶­çš„é«”ç¾ï¼ğŸ§ ",
                "100%çš„å®Œæˆç‡æ˜¯æˆ‘èˆ‡è‡ªå·±å°è©±çš„æœ€ä½³æ–¹å¼ï¼ğŸ—£ï¸",
                "æˆ‘ä¸åƒ…è¨­å®šäº†ç›®æ¨™ï¼Œé‚„å®Œæ•´åœ°å¯¦ç¾äº†å®ƒï¼ğŸŒŒ",
                "é€™å€‹å®Œæ•´çš„é€²åº¦è¡¨å°‡æˆç‚ºæˆ‘æœªä¾†ç›®æ¨™çš„å‹•åŠ›æºæ³‰ï¼âš¡",
                "æˆ‘çš„åŸ·è¡ŒåŠ›å·²ç¶“é”åˆ°äº†ä¸€å€‹æ–°çš„é«˜åº¦ï¼ğŸ”ï¸",
                "æˆ‘è­‰æ˜äº†æˆ‘èƒ½å¤ åœ¨é•·æœŸç›®æ¨™ä¸Šä¿æŒå°ˆæ³¨ç›´åˆ°å®Œæˆï¼âŒ›",
                "é€™å€‹100%çš„è¿½è¹¤è¡¨ä»£è¡¨äº†æˆ‘å…‹æœäº†æ‰€æœ‰å¯èƒ½çš„é˜»ç¤™ï¼ğŸ›¤ï¸",
                "æˆ‘çš„è‡ªå¾‹å’Œå …æŒå‰µé€ äº†é€™å€‹å®Œç¾çš„å®Œæˆç‡ï¼ğŸ’¯",
                "æˆ‘èƒ½å¤ å…Œç¾å°è‡ªå·±çš„æ‰¿è«¾ï¼Œé€™æ˜¯æˆ‘æœ€é‡è¦çš„å“è³ªä¹‹ä¸€ï¼ğŸ¤²",
                "é€™å€‹å®Œæ•´çš„é€²åº¦è¡¨æ˜¯æˆ‘æ„å¿—åŠ›çš„è¦‹è­‰ï¼ğŸ’ª",
                "æˆ‘åšåˆ°äº†æˆ‘è¨­å®šçš„ä¸€åˆ‡ï¼Œé€™è­‰æ˜äº†æˆ‘çš„æ½›åŠ›ï¼âš¡",
                "å¾éƒ¨åˆ†åˆ°æ•´é«”ï¼Œæˆ‘å®Œæˆäº†æ¯ä¸€å€‹ç’°ç¯€ï¼ğŸ§©",
                "100%çš„å®Œæˆä¸æ˜¯é‹æ°£ï¼Œè€Œæ˜¯æˆ‘å …æŒä¸æ‡ˆçš„çµæœï¼âœ¨",
                "æˆ‘èƒ½å¤ ä¸€çµ²ä¸è‹Ÿåœ°åŸ·è¡Œè¨ˆåŠƒï¼Œé€™æ˜¯å“è¶Šçš„æ¨™å¿—ï¼ğŸ…",
                "é€™å€‹å®Œæ•´çš„é€²åº¦è¡¨å°‡æˆç‚ºæˆ‘è‡ªä¿¡çš„æºæ³‰ï¼ğŸ’",
                "æˆ‘çš„å°ˆæ³¨å’ŒåŸ·è¡ŒåŠ›é”åˆ°äº†100%ï¼Œé€™æ˜¯å€¼å¾—æ…¶ç¥çš„æˆå°±ï¼ğŸ‰",
                "æˆ‘å®Œæˆäº†æ‰€æœ‰ç’°ç¯€ï¼Œé€™è­‰æ˜äº†æˆ‘çš„å…¨é¢æ€§æ€ç¶­ï¼ğŸŒ",
                "é€™å€‹100%çš„è¿½è¹¤è¡¨æ˜¯æˆ‘å°è‡ªå·±æ‰¿è«¾çš„å®Œç¾å¯¦ç¾ï¼âœ…",
                "æˆ‘è­‰æ˜äº†å³ä½¿é¢å°æŒ‘æˆ°ï¼Œæˆ‘ä¹Ÿèƒ½å¤ é”æˆç›®æ¨™ï¼â›°ï¸",
                "é€™å€‹å®Œæ•´çš„é€²åº¦è¡¨æ˜¯æˆ‘è‡ªæˆ‘ç®¡ç†èƒ½åŠ›çš„é«”ç¾ï¼ğŸ—‚ï¸",
                "æˆ‘ä¸åƒ…æœ‰å¤¢æƒ³ï¼Œé‚„æœ‰å°‡å¤¢æƒ³è®Šç‚ºç¾å¯¦çš„èƒ½åŠ›ï¼ğŸŒŒ",
                "100%çš„å®Œæˆç‡æ˜¯æˆ‘çµ¦è‡ªå·±æœ€å¥½çš„ç¦®ç‰©ï¼ğŸ€",
            ]
        };

        // GIF é—œéµè©åˆ—è¡¨ï¼ˆç”¨æ–¼éš¨æ©Ÿç”Ÿæˆæ¿€å‹µ GIFï¼‰
        const gifKeywords = [
            "motivation", "achievement", "success", "productivity", 
            "growth mindset", "perseverance", "positive", "determination",
            "focus", "progress", "goals", "inspiration"
        ];

        // å·¥å…·å‡½æ•¸ï¼šæ ¼å¼åŒ–æ—¥æœŸç‚º YYYY-MM-DD
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // å·¥å…·å‡½æ•¸ï¼šå¾ YYYY-MM-DD æ ¼å¼è§£ææ—¥æœŸ
        function parseDate(dateStr) {
            const [year, month, day] = dateStr.split('-').map(Number);
            return new Date(year, month - 1, day);
        }

        // å·¥å…·å‡½æ•¸ï¼šç²å–éš¨æ©Ÿæ•¸å­—
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // å·¥å…·å‡½æ•¸ï¼šç²å–éš¨æ©Ÿå…ƒç´ 
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        // å·¥å…·å‡½æ•¸ï¼šç”Ÿæˆå”¯ä¸€ID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substring(2);
        }

        // å·¥å…·å‡½æ•¸ï¼šæ ¼å¼åŒ–ç‚ºä¸­æ–‡æœˆä»½é¡¯ç¤º
        function formatMonthYear(date) {
            return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ`;
        }

        // å·¥å…·å‡½æ•¸ï¼šé¡¯ç¤ºè¨Šæ¯æ¡†
        function showMessageBox(message, type = 'default') {
            // å‰µå»ºå¤–å±¤é®ç½©
            const alertDiv = document.createElement('div');
            alertDiv.className = 'fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50';
            alertDiv.id = 'alert-box';

            // å‰µå»ºæç¤ºæ¡†å…§å®¹
            const alertContent = document.createElement('div');
            let borderClass = '';

            // æ ¹æ“šé¡å‹è¨­ç½®ä¸åŒçš„é‚Šæ¡†æ¨£å¼
            if (type === 'dailyTask') {
                borderClass = 'border-4 border-yellow-400 border-dashed';
            } else if (type === 'subtask') {
                borderClass = 'border-4 border-lime-400 border-dashed';
            } else if (type === 'goalComplete') {
                borderClass = 'border-4 border-green-400 border-dashed';
            }

            alertContent.className = `bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-md mx-4 animate-fade-in ${borderClass}`;

            // è¨Šæ¯å…§å®¹
            const messageDiv = document.createElement('div');
            messageDiv.className = 'text-center mb-4 text-lg';
            messageDiv.textContent = message;

            // é—œé–‰æŒ‰éˆ•
            const closeButton = document.createElement('button');
            closeButton.className = 'block mx-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700';
            closeButton.textContent = 'é—œé–‰';
            closeButton.onclick = () => {
                document.body.removeChild(alertDiv);
            };

            // çµ„åˆå…ƒç´ 
            alertContent.appendChild(messageDiv);
            alertContent.appendChild(closeButton);
            alertDiv.appendChild(alertContent);
            document.body.appendChild(alertDiv);

            // è‡ªå‹•é—œé–‰ï¼ˆ5ç§’å¾Œï¼‰
            setTimeout(() => {
                if (document.body.contains(alertDiv)) {
                    document.body.removeChild(alertDiv);
                }
            }, 5000);
        }

        // åˆå§‹åŒ–æ•¸æ“š
        function initializeData() {
            // å˜—è©¦å¾ localStorage åŠ è¼‰æ•¸æ“š
            const savedData = localStorage.getItem('dailyGoalTracker');
            if (savedData) {
                try {
                    data = JSON.parse(savedData);
                } catch (e) {
                    console.error('ç„¡æ³•è§£æä¿å­˜çš„æ•¸æ“š:', e);
                    // ä½¿ç”¨é»˜èªæ•¸æ“šçµæ§‹
                }
            }

            // ç¢ºä¿æ‰€æœ‰å¿…è¦çš„æ•¸æ“šçµæ§‹éƒ½å­˜åœ¨
            if (!data.tasks) data.tasks = {};
            if (!data.goals) data.goals = [];
            if (!data.subtasks) data.subtasks = {};
            if (!data.dailyState) data.dailyState = {};
            if (!data.reflections) data.reflections = {};

            // ä¿å­˜åˆå§‹æ•¸æ“š
            saveData();
        }

        // ä¿å­˜æ•¸æ“šåˆ° localStorage
        function saveData() {
            try {
                localStorage.setItem('dailyGoalTracker', JSON.stringify(data));
            } catch (e) {
                console.error('ä¿å­˜æ•¸æ“šå¤±æ•—:', e);
                showMessageBox('æ•¸æ“šä¿å­˜å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ‚¨çš„ç€è¦½å™¨è¨­ç½®æˆ–æ¸…ç†ä¸€äº›ç©ºé–“ã€‚', 'error');
            }
        }

        // æ›´æ–°çµ±è¨ˆæ‘˜è¦
        function updateStatsSummary() {
            // ç¸½è¨˜éŒ„å¤©æ•¸
            const totalDays = Object.keys(data.dailyState).length;
            document.getElementById('total-days').textContent = totalDays;

            // å®Œæˆä»»å‹™æ•¸
            let completedTasksCount = 0;
            Object.values(data.tasks).forEach(dayTasks => {
                dayTasks.forEach(task => {
                    if (task.completed) completedTasksCount++;
                });
            });
            document.getElementById('completed-tasks').textContent = completedTasksCount;

            // é”æˆç›®æ¨™æ•¸
            const completedGoalsCount = data.goals.filter(goal => goal.progress >= 100).length;
            document.getElementById('completed-goals').textContent = completedGoalsCount;

            // æœ€é•·é€£çºŒè¨˜éŒ„ (ç°¡åŒ–è¨ˆç®—ï¼Œåªæª¢æŸ¥æ˜¯å¦æœ‰é€£çºŒçš„æ—¥æœŸè¨˜éŒ„)
            let longestStreak = 0;
            if (totalDays > 0) {
                // ç²å–æ‰€æœ‰æœ‰è¨˜éŒ„çš„æ—¥æœŸä¸¦æ’åº
                const dates = Object.keys(data.dailyState).map(parseDate).sort((a, b) => a - b);
                
                let currentStreak = 1;
                let maxStreak = 1;
                
                for (let i = 1; i < dates.length; i++) {
                    const prevDate = dates[i - 1];
                    const currDate = dates[i];
                    
                    // æª¢æŸ¥æ—¥æœŸæ˜¯å¦é€£çºŒï¼ˆç›¸å·®ä¸€å¤©ï¼‰
                    const dayDiff = Math.round((currDate - prevDate) / (1000 * 60 * 60 * 24));
                    
                    if (dayDiff === 1) {
                        currentStreak++;
                        maxStreak = Math.max(maxStreak, currentStreak);
                    } else {
                        currentStreak = 1;
                    }
                }
                
                longestStreak = maxStreak;
            }
            document.getElementById('longest-streak').textContent = `${longestStreak}å¤©`;
        }

        // æ›´æ–°æ—¥æ›†è¦–åœ–
        function updateCalendar() {
            const calendarContainer = document.getElementById('calendar-days');
            calendarContainer.innerHTML = '';
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // æ›´æ–°ç•¶å‰æœˆä»½é¡¯ç¤º
            document.getElementById('current-month').textContent = formatMonthYear(new Date(year, month, 1));
            
            // ç²å–ç•¶æœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå¹¾ (0-6)
            const firstDay = new Date(year, month, 1).getDay();
            
            // ç²å–ç•¶æœˆçš„å¤©æ•¸
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // å¡«å……æ—¥æ›†å‰çš„ç©ºç™½
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                calendarContainer.appendChild(emptyDay);
            }
            
            // å¡«å……æ—¥æ›†å¤©æ•¸
            const today = new Date();
            const todayStr = formatDate(today);
            
            for (let i = 1; i <= daysInMonth; i++) {
                const dayDate = new Date(year, month, i);
                const dateStr = formatDate(dayDate);
                const isToday = dateStr === todayStr;
                
                const dayElement = document.createElement('div');
                dayElement.className = `calendar-day ${isToday ? 'selected' : ''}`;
                dayElement.textContent = i;
                dayElement.dataset.date = dateStr;
                
                // æª¢æŸ¥ä»»å‹™å®Œæˆæƒ…æ³
                if (data.tasks[dateStr]) {
                    const tasks = data.tasks[dateStr];
                    if (tasks.length > 0) {
                        const completed = tasks.filter(task => task.completed).length;
                        
                        if (completed === tasks.length && tasks.length > 0) {
                            dayElement.classList.add('completed');
                        } else if (completed > 0) {
                            dayElement.classList.add('partial');
                        } else {
                            dayElement.classList.add('missed');
                        }
                    }
                }
                
                // æ·»åŠ æƒ…ç·’åœ–æ¨™ï¼ˆå¦‚æœæœ‰ï¼‰
                if (data.dailyState[dateStr] && data.dailyState[dateStr].mood) {
                    const moodIcon = document.createElement('span');
                    moodIcon.className = 'mood-icon';
                    
                    // æ ¹æ“šå¿ƒæƒ…è¨­ç½®ä¸åŒçš„é¡è‰²
                    let moodEmoji = '';
                    let bgColor = '';
                    
                    switch (data.dailyState[dateStr].mood) {
                        case 'happy':
                            moodEmoji = 'ğŸ˜Š';
                            bgColor = 'bg-yellow-200';
                            break;
                        case 'calm':
                            moodEmoji = 'ğŸ˜Œ';
                            bgColor = 'bg-blue-200';
                            break;
                        case 'tired':
                            moodEmoji = 'ğŸ˜©';
                            bgColor = 'bg-gray-200';
                            break;
                        case 'anxious':
                            moodEmoji = 'ğŸ˜Ÿ';
                            bgColor = 'bg-red-200';
                            break;
                        case 'motivated':
                            moodEmoji = 'ğŸ’ª';
                            bgColor = 'bg-green-200';
                            break;
                        case 'sad':
                            moodEmoji = 'ğŸ˜¢';
                            bgColor = 'bg-blue-300';
                            break;
                        case 'angry':
                            moodEmoji = 'ğŸ˜ ';
                            bgColor = 'bg-red-300';
                            break;
                        case 'excited':
                            moodEmoji = 'ğŸ¤©';
                            bgColor = 'bg-pink-200';
                            break;
                        case 'confused':
                            moodEmoji = 'ğŸ˜•';
                            bgColor = 'bg-purple-200';
                            break;
                        case 'grateful':
                            moodEmoji = 'ğŸ™';
                            bgColor = 'bg-teal-200';
                            break;
                        default:
                            moodEmoji = 'ğŸ˜';
                            bgColor = 'bg-gray-100';
                    }
                    
                    moodIcon.textContent = moodEmoji;
                    moodIcon.classList.add(bgColor);
                    dayElement.appendChild(moodIcon);
                }
                
                // é»æ“Šæ—¥æœŸåˆ‡æ›åˆ°è©²æ—¥
                dayElement.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰æ—¥æœŸçš„ selected é¡åˆ¥
                    document.querySelectorAll('.calendar-day').forEach(day => {
                        day.classList.remove('selected');
                    });
                    
                    // ç‚ºé»æ“Šçš„æ—¥æœŸæ·»åŠ  selected é¡åˆ¥
                    dayElement.classList.add('selected');
                    
                    // æ›´æ–°ç•¶å‰æ—¥æœŸä¸¦åˆ·æ–°è¦–åœ–
                    currentDate = new Date(year, month, i);
                    loadDailyData();
                });
                
                calendarContainer.appendChild(dayElement);
            }
        }

        // åŠ è¼‰æ¯æ—¥æ•¸æ“š
        function loadDailyData() {
            const dateStr = formatDate(currentDate);
            
            // æ›´æ–°èƒ½é‡ç­‰ç´š
            const energyLevel = document.getElementById('energy-level');
            const energyValue = document.getElementById('energy-value');
            
            if (data.dailyState[dateStr] && data.dailyState[dateStr].energy) {
                energyLevel.value = data.dailyState[dateStr].energy;
                energyValue.textContent = data.dailyState[dateStr].energy;
            } else {
                energyLevel.value = 5;
                energyValue.textContent = 5;
            }
            
            // æ›´æ–°å¿ƒæƒ…æŒ‰éˆ•
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'border-2', 'border-indigo-500');
            });
            
            if (data.dailyState[dateStr] && data.dailyState[dateStr].mood) {
                const selectedMoodBtn = document.querySelector(`.mood-btn[data-mood="${data.dailyState[dateStr].mood}"]`);
                if (selectedMoodBtn) {
                    selectedMoodBtn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'border-2', 'border-indigo-500');
                }
            }
            
            // åŠ è¼‰æ¯æ—¥ä»»å‹™
            loadDailyTasks();
            
            // åŠ è¼‰åæ€æ•¸æ“š
            loadReflectionData();
        }

        // åŠ è¼‰æ¯æ—¥ä»»å‹™
        function loadDailyTasks() {
            const dateStr = formatDate(currentDate);
            const tasksContainer = document.getElementById('daily-tasks-container');
            const emptyMessage = document.getElementById('empty-task-message');
            
            // æ¸…ç©ºå®¹å™¨
            while (tasksContainer.firstChild !== emptyMessage) {
                tasksContainer.removeChild(tasksContainer.firstChild);
            }
            
            // æ”¶é›†æ‰€æœ‰ä»»å‹™çš„é›†åˆ
            const allTaskTitles = new Set();
            
            // éæ­·æ‰€æœ‰æ—¥æœŸçš„ä»»å‹™ï¼Œæ”¶é›†æ‰€æœ‰å”¯ä¸€çš„ä»»å‹™æ¨™é¡Œ
            for (const date in data.tasks) {
                if (data.tasks.hasOwnProperty(date) && Array.isArray(data.tasks[date])) {
                    data.tasks[date].forEach(task => {
                        allTaskTitles.add(task.title);
                    });
                }
            }
            
            // è½‰æ›ç‚ºæ•¸çµ„å½¢å¼
            const tasksToDisplay = [];
            
            // å°æ–¼æ¯å€‹å”¯ä¸€çš„ä»»å‹™æ¨™é¡Œï¼Œæª¢æŸ¥ç•¶å‰æ—¥æœŸæ˜¯å¦æœ‰è©²ä»»å‹™
            allTaskTitles.forEach(title => {
                // æª¢æŸ¥ç•¶å‰æ—¥æœŸæ˜¯å¦æœ‰é€™å€‹ä»»å‹™
                let taskInCurrentDate = null;
                let taskIndex = -1;
                
                if (data.tasks[dateStr] && Array.isArray(data.tasks[dateStr])) {
                    const foundTaskIndex = data.tasks[dateStr].findIndex(t => t.title === title);
                    if (foundTaskIndex !== -1) {
                        taskInCurrentDate = data.tasks[dateStr][foundTaskIndex];
                        taskIndex = foundTaskIndex;
                    }
                }
                
                // å¦‚æœç•¶å‰æ—¥æœŸæ²’æœ‰è©²ä»»å‹™ï¼Œå°‹æ‰¾æœ€è¿‘æ·»åŠ çš„åŒåä»»å‹™ä½œç‚ºæ¨¡æ¿
                if (!taskInCurrentDate) {
                    let templateTask = null;
                    let latestDate = null;
                    
                    for (const date in data.tasks) {
                        if (data.tasks.hasOwnProperty(date) && Array.isArray(data.tasks[date])) {
                            const foundTask = data.tasks[date].find(t => t.title === title);
                            if (foundTask) {
                                if (!latestDate || new Date(date) > new Date(latestDate)) {
                                    latestDate = date;
                                    templateTask = foundTask;
                                }
                            }
                        }
                    }
                    
                    if (templateTask) {
                        // ä½¿ç”¨æ¨¡æ¿ä»»å‹™ï¼Œä½†æ¨™è¨˜ç‚ºæœªå®Œæˆ
                        tasksToDisplay.push({
                            task: {
                                ...templateTask,
                                completed: false
                            },
                            isInCurrentDate: false,
                            title: templateTask.title
                        });
                    }
                } else {
                    // ä½¿ç”¨ç•¶å‰æ—¥æœŸçš„ä»»å‹™
                    tasksToDisplay.push({
                        task: taskInCurrentDate,
                        index: taskIndex,
                        dateStr: dateStr,
                        isInCurrentDate: true
                    });
                }
            });
            
            // æª¢æŸ¥æ˜¯å¦æœ‰ä»»å‹™
            if (tasksToDisplay.length > 0) {
                emptyMessage.classList.add('hidden');
                
                // æ ¹æ“šå„ªå…ˆç´šæ’åºä»»å‹™
                const priorityOrder = { high: 0, medium: 1, low: 2 };
                tasksToDisplay.sort((a, b) => {
                    const priorityA = a.task.priority || 'low';
                    const priorityB = b.task.priority || 'low';
                    return priorityOrder[priorityA] - priorityOrder[priorityB];
                });
                
                // æ·»åŠ æ‰€æœ‰ä»»å‹™å¡ç‰‡
                tasksToDisplay.forEach(taskData => {
                    const taskCard = createTaskCard(
                        taskData.task, 
                        taskData.index, 
                        taskData.dateStr, 
                        taskData.isInCurrentDate
                    );
                    tasksContainer.insertBefore(taskCard, emptyMessage);
                });
            } else {
                emptyMessage.classList.remove('hidden');
            }
        }

        // å‰µå»ºä»»å‹™å¡ç‰‡
        function createTaskCard(task, index, dateStr, isInCurrentDate) {
            const taskCard = document.createElement('div');
            // æ ¹æ“šå„ªå…ˆç´šè¨­ç½®ä¸åŒçš„é‚Šæ¡†é¡è‰²
            const priorityColors = {
                high: 'border-red-500 dark:border-red-400',
                medium: 'border-blue-500 dark:border-blue-400',
                low: 'border-yellow-500 dark:border-yellow-400'
            };
            
            taskCard.className = `task-card bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border-2 ${priorityColors[task.priority] || 'border-gray-200 dark:border-gray-600'}`;
            taskCard.dataset.index = index;
            taskCard.dataset.dateStr = dateStr;
            taskCard.dataset.priority = task.priority || 'low';
            
            // ä»»å‹™æ¨™é¡Œå’Œå‹¾é¸æ¡†
            const headerDiv = document.createElement('div');
            headerDiv.className = 'flex items-start gap-2';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'mt-1 h-5 w-5 text-indigo-600 rounded';
            checkbox.checked = task.completed || false;
            
            // ç‚ºæ‰€æœ‰ä»»å‹™æ·»åŠ æ‰“å¡åŠŸèƒ½
            checkbox.addEventListener('change', () => {
                const currentDateStr = formatDate(currentDate);
                
                if (isInCurrentDate) {
                    // ç•¶å‰æ—¥æœŸçš„ä»»å‹™ç›´æ¥æ›´æ–°
                    data.tasks[dateStr][index].completed = checkbox.checked;
                } else {
                    // éç•¶å‰æ—¥æœŸçš„ä»»å‹™ï¼Œéœ€è¦å…ˆæª¢æŸ¥ç•¶å‰æ—¥æœŸæ˜¯å¦å·²æœ‰è©²ä»»å‹™
                    if (!data.tasks[currentDateStr]) {
                        data.tasks[currentDateStr] = [];
                    }
                    
                    const existingTaskIndex = data.tasks[currentDateStr].findIndex(t => t.title === task.title);
                    
                    if (existingTaskIndex === -1) {
                        // å¦‚æœç•¶å‰æ—¥æœŸæ²’æœ‰è©²ä»»å‹™ï¼Œæ·»åŠ åˆ°ç•¶å‰æ—¥æœŸ
                        data.tasks[currentDateStr].push({
                            ...task,
                            completed: checkbox.checked
                        });
                    } else {
                        // å¦‚æœç•¶å‰æ—¥æœŸå·²æœ‰è©²ä»»å‹™ï¼Œæ›´æ–°å…¶å®Œæˆç‹€æ…‹
                        data.tasks[currentDateStr][existingTaskIndex].completed = checkbox.checked;
                    }
                }
                
                saveData();
                
                // è¦–è¦ºåé¥‹
                taskCard.style.opacity = checkbox.checked ? '0.7' : '1';
                taskTitle.style.textDecoration = checkbox.checked ? 'line-through' : 'none';
                
                // æ›´æ–°æ—¥æ›†å’Œçµ±è¨ˆ
                updateCalendar();
                updateStatsSummary();
                
                // é¡¯ç¤ºå®Œæˆè¨Šæ¯
                if (checkbox.checked) {
                    const randomMessage = getRandomItem(completionMessages.dailyTask);
                    showMessageBox(randomMessage, 'dailyTask');
                }
                
                // å¦‚æœæ˜¯éç•¶å‰æ—¥æœŸä»»å‹™è¢«æ‰“å¡ï¼Œåˆ·æ–°ä»»å‹™åˆ—è¡¨ä»¥æ›´æ–°UI
                if (!isInCurrentDate) {
                    loadDailyTasks();
                }
            });
            
            const taskContent = document.createElement('div');
            taskContent.className = 'flex-1';
            
            const titleCategoryDiv = document.createElement('div');
            titleCategoryDiv.className = 'flex flex-wrap items-center gap-2 mb-1';
            
            const taskTitle = document.createElement('h3');
            taskTitle.className = 'font-medium';
            taskTitle.textContent = task.title;
            taskTitle.style.textDecoration = task.completed ? 'line-through' : 'none';
            
            // æ·»åŠ ä»»å‹™æ—¥æœŸæ¨™è¨˜
            const dateDisplay = document.createElement('span');
            dateDisplay.className = 'text-xs text-gray-500 dark:text-gray-400 ml-1';
            
            // å°‡æ—¥æœŸå­—ç¬¦ä¸²è½‰æ›ç‚ºå¯è®€æ ¼å¼
            if (dateStr) {
                const taskDate = parseDate(dateStr);
                const formattedDate = `${taskDate.getFullYear()}/${taskDate.getMonth() + 1}/${taskDate.getDate()}`;
                dateDisplay.textContent = formattedDate;
            } else {
                dateDisplay.textContent = 'æœªçŸ¥æ—¥æœŸ';
            }
            
            // å¦‚æœä¸æ˜¯ç•¶å‰æ—¥æœŸçš„ä»»å‹™ï¼Œæ·»åŠ "æ­·å²ä»»å‹™"æ¨™è¨˜
            if (!isInCurrentDate) {
                const historyTag = document.createElement('span');
                historyTag.className = 'text-xs px-2 py-0.5 rounded-full ml-1 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300';
                historyTag.textContent = 'æ­·å²ä»»å‹™';
                titleCategoryDiv.appendChild(historyTag);
            }
            
            // æ·»åŠ å„ªå…ˆç´šæ¨™è¨˜
            const priorityDisplay = document.createElement('span');
            priorityDisplay.className = `text-xs px-2 py-0.5 rounded-full ml-1 ${
                task.priority === 'high' ? 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300' :
                task.priority === 'medium' ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300' :
                'bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300'
            }`;
            
            const priorityNames = {
                high: 'å„ªå…ˆåº¦ é«˜',
                medium: 'å„ªå…ˆåº¦ ä¸­',
                low: 'å„ªå…ˆåº¦ ä½'
            };  
            
            priorityDisplay.textContent = priorityNames[task.priority] || 'å„ªå…ˆåº¦ ä½';
            
            const categorySpan = document.createElement('span');
            categorySpan.className = `text-xs category-tag category-${task.category || 'other'}`;
            
            const categoryNames = {
                work: 'å·¥ä½œ',
                study: 'å­¸ç¿’',
                health: 'å¥åº·',
                personal: 'å€‹äºº',
                other: 'å…¶ä»–'
            };
            
            categorySpan.textContent = categoryNames[task.category] || 'å…¶ä»–';
            
            titleCategoryDiv.appendChild(taskTitle);
            titleCategoryDiv.appendChild(dateDisplay);
            titleCategoryDiv.appendChild(priorityDisplay);
            titleCategoryDiv.appendChild(categorySpan);
            taskContent.appendChild(titleCategoryDiv);
            
            // ä»»å‹™å‚™è¨»ï¼ˆå¦‚æœæœ‰ï¼‰
            if (task.notes) {
                const notesDiv = document.createElement('div');
                notesDiv.className = 'text-sm text-gray-600 dark:text-gray-400 mb-2';
                notesDiv.textContent = task.notes;
                taskContent.appendChild(notesDiv);
            }
            
            // ä»»å‹™é€£çµï¼ˆå¦‚æœæœ‰ï¼‰
            if (task.link) {
                const linkDiv = document.createElement('div');
                linkDiv.className = 'mt-1';
                
                const link = document.createElement('a');
                link.href = task.link;
                link.target = '_blank';
                link.className = 'px-3 py-1 bg-violet-500 hover:bg-purple-500 text-white rounded-lg text-sm';
                //link.innerHTML = `<i class="fas fa-link mr-1"></i>${task.link.substring(0, 30)}${task.link.length > 30 ? '...' : ''}`;
                link.innerHTML = `<i class="fas fa-link mr-1"></i>é¦¬ä¸Šé–‹å§‹ï¼`;
                linkDiv.appendChild(link);
                taskContent.appendChild(linkDiv);
            }
            
            headerDiv.appendChild(checkbox);
            headerDiv.appendChild(taskContent);
            
            // æ“ä½œæŒ‰éˆ•
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'flex items-center gap-1 mt-2 justify-end';
            
            const editButton = document.createElement('button');
            editButton.className = 'text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500';
            editButton.innerHTML = '<i class="fas fa-edit mr-1"></i>ç·¨è¼¯';
            editButton.addEventListener('click', () => {
                // è¼‰å…¥ä»»å‹™è³‡æ–™åˆ°è¡¨å–®
                document.getElementById('task-title').value = task.title;
                document.getElementById('task-category').value = task.category || 'other';
                document.getElementById('task-notes').value = task.notes || '';
                document.getElementById('task-link').value = task.link || '';
                document.getElementById('task-priority').value = task.priority || 'low';
                
                // æ‰“é–‹æ¨¡æ…‹æ¡†
                document.getElementById('add-daily-task-modal').classList.remove('hidden');
                
                // è¨­ç½®æ¨™èªŒï¼Œè¡¨ç¤ºæ­£åœ¨ç·¨è¼¯è€Œä¸æ˜¯æ–°å¢
                document.getElementById('daily-task-form').dataset.editing = 'true';
                
                if (isInCurrentDate && index !== undefined) {
                    document.getElementById('daily-task-form').dataset.editIndex = index;
                    document.getElementById('daily-task-form').dataset.editDate = dateStr;
                } else {
                    // å¦‚æœä¸æ˜¯ç•¶å‰æ—¥æœŸçš„ä»»å‹™ï¼Œå‰‡å‰µå»ºä¸€å€‹æ–°ä»»å‹™
                    document.getElementById('daily-task-form').dataset.editing = 'false';
                }
            });
            
            const deleteButton = document.createElement('button');
            deleteButton.className = 'text-xs px-2 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800';
            deleteButton.innerHTML = '<i class="fas fa-trash mr-1"></i>åˆªé™¤';
            
            // å¦‚æœæ˜¯ç•¶å‰æ—¥æœŸçš„ä»»å‹™ï¼Œå‰‡åˆªé™¤è©²æ—¥çš„ä»»å‹™ï¼›å¦å‰‡ï¼Œåˆªé™¤æ‰€æœ‰åŒåä»»å‹™
            deleteButton.addEventListener('click', () => {
                if (isInCurrentDate) {
                    if (confirm('ç¢ºå®šè¦å¾ç•¶å‰æ—¥æœŸåˆªé™¤é€™å€‹ä»»å‹™å—ï¼Ÿ')) {
                        // å¾æ•¸æ“šä¸­åˆªé™¤ä»»å‹™
                        data.tasks[dateStr].splice(index, 1);
                        
                        // å¦‚æœè©²æ—¥æ²’æœ‰ä»»å‹™äº†ï¼Œåˆªé™¤è©²æ—¥çš„æ¢ç›®
                        if (data.tasks[dateStr].length === 0) {
                            delete data.tasks[dateStr];
                        }
                        
                        // ä¿å­˜ä¸¦é‡æ–°åŠ è¼‰
                        saveData();
                        loadDailyTasks();
                        updateCalendar();
                        updateStatsSummary();
                    }
                } else {
                    if (confirm('ç¢ºå®šè¦å¾æ‰€æœ‰æ—¥æœŸä¸­åˆªé™¤é€™å€‹ä»»å‹™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•æ’¤éŠ·ã€‚')) {
                        // å¾æ‰€æœ‰æ—¥æœŸä¸­åˆªé™¤åŒåä»»å‹™
                        const taskTitle = task.title;
                        
                        for (const date in data.tasks) {
                            if (data.tasks.hasOwnProperty(date) && Array.isArray(data.tasks[date])) {
                                const taskIndex = data.tasks[date].findIndex(t => t.title === taskTitle);
                                if (taskIndex !== -1) {
                                    data.tasks[date].splice(taskIndex, 1);
                                    
                                    // å¦‚æœè©²æ—¥æ²’æœ‰ä»»å‹™äº†ï¼Œåˆªé™¤è©²æ—¥çš„æ¢ç›®
                                    if (data.tasks[date].length === 0) {
                                        delete data.tasks[date];
                                    }
                                }
                            }
                        }
                        
                        // ä¿å­˜ä¸¦é‡æ–°åŠ è¼‰
                        saveData();
                        loadDailyTasks();
                        updateCalendar();
                        updateStatsSummary();
                    }
                }
            });
            
            actionsDiv.appendChild(editButton);
            actionsDiv.appendChild(deleteButton);
            
            taskCard.appendChild(headerDiv);
            taskCard.appendChild(actionsDiv);
            
            // è¨­ç½®åˆå§‹é€æ˜åº¦
            taskCard.style.opacity = task.completed ? '0.7' : '1';
            
            return taskCard;
        }

        // åŠ è¼‰åæ€æ•¸æ“š
        function loadReflectionData() {
            const dateStr = formatDate(currentDate);
            
            // é‡ç½®é¸ä¸­çš„æƒ…ç·’
            document.querySelectorAll('.reflection-mood-btn').forEach(btn => {
                btn.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'border-2', 'border-indigo-500');
            });
            
            // æ¸…ç©ºæƒ…ç·’å¼·åº¦å®¹å™¨
            const moodsContainer = document.getElementById('selected-moods-container');
            moodsContainer.innerHTML = '<div class="text-gray-500 dark:text-gray-400 text-sm italic">è«‹å¾ä¸Šæ–¹é¸æ“‡ä¸€æˆ–å¤šå€‹æƒ…ç·’</div>';
            
            // é‡ç½®æ‰€æœ‰è¡¨å–®å­—æ®µ
            document.getElementById('reflection-good').value = '';
            document.getElementById('reflection-improve').value = '';
            document.getElementById('reflection-lessons').value = '';
            document.getElementById('reflection-tomorrow').value = '';
            document.getElementById('emotion-triggers').value = '';
            document.getElementById('negative-thoughts').value = '';
            document.getElementById('trigger-situation').value = '';
            document.getElementById('thought-rebuttal').value = '';
            document.getElementById('balanced-thought').value = '';
            
            // å¦‚æœæœ‰åæ€æ•¸æ“šï¼Œè¼‰å…¥
            if (data.reflections[dateStr]) {
                const reflection = data.reflections[dateStr];
                
                // è¼‰å…¥æ–‡å­—å­—æ®µ
                if (reflection.good) document.getElementById('reflection-good').value = reflection.good;
                if (reflection.improve) document.getElementById('reflection-improve').value = reflection.improve;
                if (reflection.lessons) document.getElementById('reflection-lessons').value = reflection.lessons;
                if (reflection.tomorrow) document.getElementById('reflection-tomorrow').value = reflection.tomorrow;
                if (reflection.emotionTriggers) document.getElementById('emotion-triggers').value = reflection.emotionTriggers;
                if (reflection.negativeThoughts) document.getElementById('negative-thoughts').value = reflection.negativeThoughts;
                if (reflection.triggerSituation) document.getElementById('trigger-situation').value = reflection.triggerSituation;
                if (reflection.thoughtRebuttal) document.getElementById('thought-rebuttal').value = reflection.thoughtRebuttal;
                if (reflection.balancedThought) document.getElementById('balanced-thought').value = reflection.balancedThought;
                
                // è¼‰å…¥æƒ…ç·’
                if (reflection.moods && reflection.moods.length > 0) {
                    // æ¸…ç©ºå®¹å™¨
                    moodsContainer.innerHTML = '';
                    
                    // æ¨™è¨˜é¸æ“‡çš„æƒ…ç·’æŒ‰éˆ•
                    reflection.moods.forEach(mood => {
                        const moodBtn = document.querySelector(`.reflection-mood-btn[data-mood="${mood.name}"]`);
                        if (moodBtn) {
                            moodBtn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'border-2', 'border-indigo-500');
                        }
                        
                        // æ·»åŠ æƒ…ç·’å¼·åº¦æ»‘å¡Š
                        const moodItem = document.createElement('div');
                        moodItem.className = 'flex items-center gap-2';
                        moodItem.innerHTML = `
                            <span class="text-sm">${getMoodEmoji(mood.name)} ${getMoodName(mood.name)}</span>
                            <input type="range" min="1" max="5" value="${mood.intensity}" class="flex-1 h-2" data-mood="${mood.name}">
                            <span class="text-sm">${mood.intensity}</span>
                        `;
                        
                        // ç›£è½æ»‘å¡Šè®ŠåŒ–
                        const slider = moodItem.querySelector('input[type="range"]');
                        const valueDisplay = moodItem.querySelector('span:last-child');
                        slider.addEventListener('input', () => {
                            valueDisplay.textContent = slider.value;
                        });
                        
                        moodsContainer.appendChild(moodItem);
                    });
                }
            }
        }

        // ç²å–æƒ…ç·’åç¨±
        function getMoodName(mood) {
            const moodNames = {
                happy: 'é–‹å¿ƒ',
                calm: 'å¹³éœ',
                tired: 'ç–²æ†Š',
                anxious: 'ç„¦æ…®',
                motivated: 'æœ‰å‹•åŠ›',
                sad: 'æ‚²å‚·',
                angry: 'æ†¤æ€’',
                excited: 'èˆˆå¥®',
                confused: 'å›°æƒ‘',
                grateful: 'æ„Ÿæ©'
            };
            
            return moodNames[mood] || mood;
        }

        // ç²å–æƒ…ç·’ Emoji
        function getMoodEmoji(mood) {
            const moodEmojis = {
                happy: 'ğŸ˜Š',
                calm: 'ğŸ˜Œ',
                tired: 'ğŸ˜©',
                anxious: 'ğŸ˜Ÿ',
                motivated: 'ğŸ’ª',
                sad: 'ğŸ˜¢',
                angry: 'ğŸ˜ ',
                excited: 'ğŸ¤©',
                confused: 'ğŸ˜•',
                grateful: 'ğŸ™'
            };
            
            return moodEmojis[mood] || 'ğŸ˜';
        }

        // åŠ è¼‰ç›®æ¨™åˆ—è¡¨
        function loadGoals() {
            const goalsContainer = document.getElementById('goals-container');
            const emptyMessage = document.getElementById('empty-goal-message');
            
            // æ¸…ç©ºå®¹å™¨
            while (goalsContainer.firstChild !== emptyMessage) {
                goalsContainer.removeChild(goalsContainer.firstChild);
            }
            
            // ç¦ç”¨å­ä»»å‹™å’Œç›®æ¨™è©³æƒ…æŒ‰éˆ•
            document.getElementById('add-subtask').disabled = true;
            document.getElementById('edit-goal').disabled = true;
            document.getElementById('delete-goal').disabled = true;
            
            // é¡¯ç¤ºç›®æ¨™åˆ—è¡¨
            if (data.goals.length > 0) {
                emptyMessage.classList.add('hidden');
                
                // æ·»åŠ ç›®æ¨™å¡ç‰‡
                data.goals.forEach((goal, index) => {
                    const goalCard = createGoalCard(goal, index);
                    goalsContainer.insertBefore(goalCard, emptyMessage);
                });
            } else {
                emptyMessage.classList.remove('hidden');
                
                // é‡ç½®ç•¶å‰ç›®æ¨™ ID
                currentGoalId = null;
                
                // éš±è—ç›®æ¨™è©³æƒ…ï¼Œé¡¯ç¤ºç©ºæ¶ˆæ¯
                document.getElementById('goal-details').classList.add('hidden');
                document.getElementById('empty-goal-details').classList.remove('hidden');
                document.getElementById('empty-subtask-message').classList.remove('hidden');
            }
        }

        // å‰µå»ºç›®æ¨™å¡ç‰‡
        function createGoalCard(goal, index) {
            const goalCard = document.createElement('div');
            goalCard.className = `task-card p-3 rounded-lg ${currentGoalId === goal.id ? 'bg-indigo-50 dark:bg-indigo-900 border-2 border-indigo-500' : 'bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600'}`;
            goalCard.dataset.id = goal.id;
            
            // ç›®æ¨™æ¨™é¡Œå’Œé¡åˆ¥
            const headerDiv = document.createElement('div');
            headerDiv.className = 'mb-2';
            
            const titleCategoryDiv = document.createElement('div');
            titleCategoryDiv.className = 'flex flex-wrap items-center gap-2 mb-1';
            
            const goalTitle = document.createElement('h3');
            goalTitle.className = 'font-medium';
            goalTitle.textContent = goal.title;
            
            const categorySpan = document.createElement('span');
            categorySpan.className = `text-xs category-tag category-${goal.category || 'other'}`;
            
            const categoryNames = {
                work: 'å·¥ä½œ',
                study: 'å­¸ç¿’',
                health: 'å¥åº·',
                personal: 'å€‹äºº',
                other: 'å…¶ä»–'
            };
            
            categorySpan.textContent = categoryNames[goal.category] || 'å…¶ä»–';
            
            titleCategoryDiv.appendChild(goalTitle);
            titleCategoryDiv.appendChild(categorySpan);
            headerDiv.appendChild(titleCategoryDiv);
            
            // æˆªæ­¢æ—¥æœŸ (å¦‚æœæœ‰)
            if (goal.deadline) {
                const deadlineDiv = document.createElement('div');
                deadlineDiv.className = 'text-xs text-gray-500 dark:text-gray-400';
                deadlineDiv.innerHTML = `<i class="far fa-calendar-alt mr-1"></i>${goal.deadline}`;
                headerDiv.appendChild(deadlineDiv);
            }
            
            // é€²åº¦æ¢
            const progressDiv = document.createElement('div');
            progressDiv.className = 'mt-2';
            
            const progressLabel = document.createElement('div');
            progressLabel.className = 'flex justify-between text-xs mb-1';
            
            const progressText = document.createElement('span');
            progressText.textContent = 'é€²åº¦';
            
            const progressValue = document.createElement('span');
            progressValue.textContent = `${goal.progress || 0}%`;
            
            progressLabel.appendChild(progressText);
            progressLabel.appendChild(progressValue);
            
            const progressBar = document.createElement('div');
            progressBar.className = 'progress-bar';
            
            const progressFill = document.createElement('div');
            progressFill.className = 'progress-fill';
            progressFill.style.width = `${goal.progress || 0}%`;
            
            progressBar.appendChild(progressFill);
            
            progressDiv.appendChild(progressLabel);
            progressDiv.appendChild(progressBar);
            
            // é»æ“Šç›®æ¨™å¡ç‰‡é¸ä¸­ç›®æ¨™
            goalCard.addEventListener('click', () => {
                // æ›´æ–°é¸ä¸­ç‹€æ…‹
                document.querySelectorAll('#goals-container .task-card').forEach(card => {
                    card.classList.remove('bg-indigo-50', 'dark:bg-indigo-900', 'border-2', 'border-indigo-500');
                    card.classList.add('bg-gray-50', 'dark:bg-gray-700', 'border', 'border-gray-200', 'dark:border-gray-600');
                });
                
                goalCard.classList.remove('bg-gray-50', 'dark:bg-gray-700', 'border', 'border-gray-200', 'dark:border-gray-600');
                goalCard.classList.add('bg-indigo-50', 'dark:bg-indigo-900', 'border-2', 'border-indigo-500');
                
                // è¨­ç½®ç•¶å‰ç›®æ¨™ ID
                currentGoalId = goal.id;
                
                // å•Ÿç”¨æŒ‰éˆ•
                document.getElementById('add-subtask').disabled = false;
                document.getElementById('edit-goal').disabled = false;
                document.getElementById('delete-goal').disabled = false;
                
                // é¡¯ç¤ºç›®æ¨™è©³æƒ…
                showGoalDetails(goal);
                
                // åŠ è¼‰å­ä»»å‹™
                loadSubtasks();
            });
            
            goalCard.appendChild(headerDiv);
            goalCard.appendChild(progressDiv);
            
            return goalCard;
        }

        // é¡¯ç¤ºç›®æ¨™è©³æƒ…
        function showGoalDetails(goal) {
            // éš±è—ç©ºæ¶ˆæ¯ï¼Œé¡¯ç¤ºè©³æƒ…
            document.getElementById('empty-goal-details').classList.add('hidden');
            document.getElementById('goal-details').classList.remove('hidden');
            
            // å¡«å……è©³æƒ…
            document.getElementById('goal-detail-title').textContent = goal.title;
            
            // è¨­ç½®é¡åˆ¥æ¨™ç±¤
            const categoryElement = document.getElementById('goal-detail-category');
            categoryElement.className = `category-tag category-${goal.category || 'other'}`;
            
            const categoryNames = {
                work: 'å·¥ä½œ',
                study: 'å­¸ç¿’',
                health: 'å¥åº·',
                personal: 'å€‹äºº',
                other: 'å…¶ä»–'
            };
            
            categoryElement.textContent = categoryNames[goal.category] || 'å…¶ä»–';
            
            // è¨­ç½®æˆªæ­¢æ—¥æœŸ
            if (goal.deadline) {
                document.getElementById('goal-detail-deadline').innerHTML = `<i class="far fa-calendar-alt mr-1"></i>${goal.deadline}`;
                document.getElementById('goal-detail-deadline').classList.remove('hidden');
            } else {
                document.getElementById('goal-detail-deadline').classList.add('hidden');
            }
            
            // è¨­ç½®é€²åº¦
            document.getElementById('goal-detail-progress-text').textContent = `${goal.progress || 0}%`;
            document.getElementById('goal-detail-progress').style.width = `${goal.progress || 0}%`;
            
            // å¡«å……å…¶ä»–å­—æ®µ
            document.getElementById('goal-detail-why').textContent = goal.why || 'æœªè¨­å®š';
            document.getElementById('goal-detail-specific').textContent = goal.specific || 'æœªè¨­å®š';
            document.getElementById('goal-detail-measurable').textContent = goal.measurable || 'æœªè¨­å®š';
            document.getElementById('goal-detail-achievable').textContent = goal.achievable || 'æœªè¨­å®š';
            document.getElementById('goal-detail-relevant').textContent = goal.relevant || 'æœªè¨­å®š';
            document.getElementById('goal-detail-timebound').textContent = goal.timebound || 'æœªè¨­å®š';
        }

        // åŠ è¼‰å­ä»»å‹™
        function loadSubtasks() {
            if (!currentGoalId) return;
            
            const subtasksContainer = document.getElementById('subtasks-container');
            const emptyMessage = document.getElementById('empty-subtask-message');
            
            // æ¸…ç©ºå®¹å™¨
            while (subtasksContainer.firstChild !== emptyMessage) {
                subtasksContainer.removeChild(subtasksContainer.firstChild);
            }
            
            // æª¢æŸ¥æ˜¯å¦æœ‰å­ä»»å‹™
            if (data.subtasks[currentGoalId] && data.subtasks[currentGoalId].length > 0) {
                emptyMessage.classList.add('hidden');
                
                // æ·»åŠ å­ä»»å‹™å¡ç‰‡
                data.subtasks[currentGoalId].forEach((subtask, index) => {
                    const subtaskCard = createSubtaskCard(subtask, index);
                    subtasksContainer.insertBefore(subtaskCard, emptyMessage);
                });
            } else {
                emptyMessage.classList.remove('hidden');
            }
        }

        // å‰µå»ºå­ä»»å‹™å¡ç‰‡
        function createSubtaskCard(subtask, index) {
            const subtaskCard = document.createElement('div');
            subtaskCard.className = 'task-card bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-200 dark:border-gray-600';
            subtaskCard.dataset.index = index;
            
            // å­ä»»å‹™æ¨™é¡Œå’Œå‹¾é¸æ¡†
            const headerDiv = document.createElement('div');
            headerDiv.className = 'flex items-start gap-2';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'mt-1 h-5 w-5 text-indigo-600 rounded';
            checkbox.checked = subtask.completed || false;
            checkbox.addEventListener('change', () => {
                // æ›´æ–°æ•¸æ“š
                data.subtasks[currentGoalId][index].completed = checkbox.checked;
                
                // æ›´æ–°ç›®æ¨™é€²åº¦
                updateGoalProgress();
                
                // ä¿å­˜æ•¸æ“š
                saveData();
                
                // è¦–è¦ºåé¥‹
                subtaskCard.style.opacity = checkbox.checked ? '0.7' : '1';
                subtaskTitle.style.textDecoration = checkbox.checked ? 'line-through' : 'none';
                
                // æ›´æ–°ç›®æ¨™åˆ—è¡¨å’Œè©³æƒ…
                loadGoals();
                
                // å¦‚æœç›®æ¨™å®Œæˆäº†ï¼Œé¡¯ç¤ºè¨Šæ¯
                const goal = data.goals.find(g => g.id === currentGoalId);
                if (checkbox.checked) {
                    // é¡¯ç¤ºå­ä»»å‹™å®Œæˆè¨Šæ¯
                    const randomMessage = getRandomItem(completionMessages.subtask);
                    showMessageBox(randomMessage, 'subtask');
                    
                    // å¦‚æœç›®æ¨™å‰›å¥½å®Œæˆï¼Œé¡¯ç¤ºç›®æ¨™å®Œæˆè¨Šæ¯
                    if (goal && goal.progress >= 100) {
                        setTimeout(() => {
                            const randomGoalMessage = getRandomItem(completionMessages.goalComplete);
                            showMessageBox(randomGoalMessage, 'goalComplete');
                        }, 500);
                    }
                }
            });
            
            const subtaskContent = document.createElement('div');
            subtaskContent.className = 'flex-1';
            
            const subtaskTitle = document.createElement('h3');
            subtaskTitle.className = 'font-medium mb-1';
            subtaskTitle.textContent = subtask.title;
            subtaskTitle.style.textDecoration = subtask.completed ? 'line-through' : 'none';
            
            subtaskContent.appendChild(subtaskTitle);
            
            // å­ä»»å‹™æè¿°ï¼ˆå¦‚æœæœ‰ï¼‰
            if (subtask.description) {
                const descriptionDiv = document.createElement('div');
                descriptionDiv.className = 'text-sm text-gray-600 dark:text-gray-400 mb-2';
                descriptionDiv.textContent = subtask.description;
                subtaskContent.appendChild(descriptionDiv);
            }
            
            // å­ä»»å‹™é€£çµï¼ˆå¦‚æœæœ‰ï¼‰
            if (subtask.link) {
                const linkDiv = document.createElement('div');
                linkDiv.className = 'mt-1';
                
                const link = document.createElement('a');
                link.href = subtask.link;
                link.target = '_blank';
                link.className = 'text-xs text-indigo-600 dark:text-indigo-400 hover:underline flex items-center';
                link.innerHTML = `<i class="fas fa-link mr-1"></i>${subtask.link.substring(0, 30)}${subtask.link.length > 30 ? '...' : ''}`;
                
                linkDiv.appendChild(link);
                subtaskContent.appendChild(linkDiv);
            }
            
            // å­ä»»å‹™æˆªæ­¢æ—¥æœŸï¼ˆå¦‚æœæœ‰ï¼‰
            if (subtask.deadline) {
                const deadlineDiv = document.createElement('div');
                deadlineDiv.className = 'text-xs text-gray-500 dark:text-gray-400 mt-1';
                deadlineDiv.innerHTML = `<i class="far fa-calendar-alt mr-1"></i>${subtask.deadline}`;
                subtaskContent.appendChild(deadlineDiv);
            }
            
            headerDiv.appendChild(checkbox);
            headerDiv.appendChild(subtaskContent);
            
            // æ“ä½œæŒ‰éˆ•
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'flex items-center gap-1 mt-2 justify-end';
            
            const editButton = document.createElement('button');
            editButton.className = 'text-xs px-2 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500';
            editButton.innerHTML = '<i class="fas fa-edit mr-1"></i>ç·¨è¼¯';
            editButton.addEventListener('click', () => {
                // è¼‰å…¥å­ä»»å‹™è³‡æ–™åˆ°è¡¨å–®
                document.getElementById('subtask-title').value = subtask.title;
                document.getElementById('subtask-description').value = subtask.description || '';
                document.getElementById('subtask-link').value = subtask.link || '';
                document.getElementById('subtask-deadline').value = subtask.deadline || '';
                
                // æ‰“é–‹æ¨¡æ…‹æ¡†
                document.getElementById('add-subtask-modal').classList.remove('hidden');
                
                // è¨­ç½®æ¨™èªŒï¼Œè¡¨ç¤ºæ­£åœ¨ç·¨è¼¯è€Œä¸æ˜¯æ–°å¢
                document.getElementById('subtask-form').dataset.editing = 'true';
                document.getElementById('subtask-form').dataset.editIndex = index;
            });
            
            const deleteButton = document.createElement('button');
            deleteButton.className = 'text-xs px-2 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800';
            deleteButton.innerHTML = '<i class="fas fa-trash mr-1"></i>åˆªé™¤';
            deleteButton.addEventListener('click', () => {
                if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹å­ä»»å‹™å—ï¼Ÿ')) {
                    // å¾æ•¸æ“šä¸­åˆªé™¤å­ä»»å‹™
                    data.subtasks[currentGoalId].splice(index, 1);
                    
                    // å¦‚æœè©²ç›®æ¨™æ²’æœ‰å­ä»»å‹™äº†ï¼Œåˆªé™¤è©²ç›®æ¨™çš„å­ä»»å‹™æ¢ç›®
                    if (data.subtasks[currentGoalId].length === 0) {
                        delete data.subtasks[currentGoalId];
                    }
                    
                    // æ›´æ–°ç›®æ¨™é€²åº¦
                    updateGoalProgress();
                    
                    // ä¿å­˜ä¸¦é‡æ–°åŠ è¼‰
                    saveData();
                    loadSubtasks();
                    loadGoals();
                }
            });
            
            actionsDiv.appendChild(editButton);
            actionsDiv.appendChild(deleteButton);
            
            subtaskCard.appendChild(headerDiv);
            subtaskCard.appendChild(actionsDiv);
            
            // è¨­ç½®åˆå§‹é€æ˜åº¦
            subtaskCard.style.opacity = subtask.completed ? '0.7' : '1';
            
            return subtaskCard;
        }

        // æ›´æ–°ç›®æ¨™é€²åº¦
        function updateGoalProgress() {
            if (!currentGoalId) return;
            
            // ç²å–ç›®æ¨™çš„å­ä»»å‹™
            const subtasks = data.subtasks[currentGoalId] || [];
            
            // è¨ˆç®—é€²åº¦
            let progress = 0;
            if (subtasks.length > 0) {
                const completedCount = subtasks.filter(subtask => subtask.completed).length;
                progress = Math.round((completedCount / subtasks.length) * 100);
            }
            
            // æ›´æ–°ç›®æ¨™é€²åº¦
            const goalIndex = data.goals.findIndex(goal => goal.id === currentGoalId);
            if (goalIndex !== -1) {
                data.goals[goalIndex].progress = progress;
            }
        }

        // ç”Ÿæˆéš¨æ©Ÿ GIF å’Œæ¿€å‹µèªéŒ„
        function generateDailyInspiration() {
            // é¸æ“‡éš¨æ©Ÿæ¿€å‹µèªéŒ„
            const randomQuote = getRandomItem(motivationalQuotes);
            document.getElementById('motivation-quote').textContent = randomQuote;
            
            // è¼‰å…¥éš¨æ©Ÿåœ–ç‰‡
            loadRandomImage();
            
        }

        // ç•¶å‰é¡¯ç¤ºçš„åœ–ç‰‡ç·¨è™Ÿ
        let currentImageNumber = 0;

        // è¼‰å…¥éš¨æ©Ÿåœ–ç‰‡
        function loadRandomImage() {
            // åœ–ç‰‡ç¸½æ•¸é‡
            const totalImages = 28;
            
            // é¸æ“‡ä¸€å€‹ä¸åŒæ–¼ç•¶å‰çš„éš¨æ©Ÿåœ–ç‰‡ç·¨è™Ÿ
            let randomNumber;
            do {
                randomNumber = Math.floor(Math.random() * totalImages) + 1;
            } while (randomNumber === currentImageNumber && totalImages > 1);
            
            // æ›´æ–°ç•¶å‰åœ–ç‰‡ç·¨è™Ÿ
            currentImageNumber = randomNumber;
            
            // è¨­ç½®åœ–ç‰‡è·¯å¾‘
            const imagePath = `./img/${randomNumber}.gif`;
            document.getElementById('gif-image').src = imagePath;
        }

        // åˆå§‹åŒ–åœ–è¡¨
        function initializeCharts() {
            // åˆå§‹åŒ–ä»»å‹™å®Œæˆç‡åœ–è¡¨
            const taskCtx = document.getElementById('task-completion-chart').getContext('2d');
            window.taskCompletionChart = new Chart(taskCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'ä»»å‹™å®Œæˆç‡',
                        data: [],
                        backgroundColor: 'rgba(93, 92, 222, 0.6)',
                        borderColor: 'rgba(93, 92, 222, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => `${value}%`
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: (context) => `å®Œæˆç‡: ${context.raw}%`
                            }
                        }
                    }
                }
            });
            
            // åˆå§‹åŒ–èƒ½é‡ç­‰ç´šè¶¨å‹¢åœ–è¡¨
            const energyCtx = document.getElementById('energy-level-chart').getContext('2d');
            window.energyLevelChart = new Chart(energyCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'èƒ½é‡ç­‰ç´š',
                        data: [],
                        borderColor: 'rgba(93, 92, 222, 1)',
                        backgroundColor: 'rgba(93, 92, 222, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
            
            // åˆå§‹åŒ–ç›®æ¨™é€²åº¦åœ–è¡¨
            const goalCtx = document.getElementById('goal-progress-chart').getContext('2d');
            window.goalProgressChart = new Chart(goalCtx, {
                type: 'radar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'ç›®æ¨™é€²åº¦',
                        data: [],
                        backgroundColor: 'rgba(93, 92, 222, 0.2)',
                        borderColor: 'rgba(93, 92, 222, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(93, 92, 222, 1)',
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20,
                                callback: value => `${value}%`
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: (context) => `é€²åº¦: ${context.raw}%`
                            }
                        }
                    }
                }
            });
            
            // åˆå§‹åŒ–æƒ…ç·’åˆ†ä½ˆåœ–è¡¨
            const moodCtx = document.getElementById('mood-distribution-chart').getContext('2d');
            window.moodDistributionChart = new Chart(moodCtx, {
                type: 'pie',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(199, 199, 199, 0.7)',
                            'rgba(83, 102, 255, 0.7)',
                            'rgba(40, 159, 64, 0.7)',
                            'rgba(210, 199, 199, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(199, 199, 199, 1)',
                            'rgba(83, 102, 255, 1)',
                            'rgba(40, 159, 64, 1)',
                            'rgba(210, 199, 199, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: (context) => `${context.label}: ${context.raw}æ¬¡`
                            }
                        }
                    }
                }
            });
        }

        // æ›´æ–°é€²åº¦å¯è¦–åŒ–
        function updateVisualization() {
            // ç²å–æ—¥æœŸç¯„åœ
            const endDate = new Date();
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - dateRangeForVisualization + 1);
            
            // ç”Ÿæˆæ—¥æœŸç¯„åœå…§çš„æ‰€æœ‰æ—¥æœŸ
            const dateRange = [];
            const currentDate = new Date(startDate);
            while (currentDate <= endDate) {
                dateRange.push(formatDate(currentDate));
                currentDate.setDate(currentDate.getDate() + 1);
            }
            
            // æ›´æ–°ä»»å‹™å®Œæˆç‡åœ–è¡¨
            const taskCompletionData = dateRange.map(date => {
                const tasks = data.tasks[date] || [];
                if (tasks.length === 0) return 0;
                
                const completed = tasks.filter(task => task.completed).length;
                return Math.round((completed / tasks.length) * 100);
            });
            
            window.taskCompletionChart.data.labels = dateRange.map(date => date.substring(5)); // åªé¡¯ç¤ºæœˆæ—¥
            window.taskCompletionChart.data.datasets[0].data = taskCompletionData;
            window.taskCompletionChart.update();
            
            // æ›´æ–°èƒ½é‡ç­‰ç´šè¶¨å‹¢åœ–è¡¨
            const energyLevelData = dateRange.map(date => {
                return data.dailyState[date]?.energy || null;
            });
            
            window.energyLevelChart.data.labels = dateRange.map(date => date.substring(5));
            window.energyLevelChart.data.datasets[0].data = energyLevelData;
            window.energyLevelChart.update();
            
            // æ›´æ–°ç›®æ¨™é€²åº¦åœ–è¡¨
            const goalLabels = data.goals.map(goal => goal.title.substring(0, 10) + (goal.title.length > 10 ? '...' : ''));
            const goalProgressData = data.goals.map(goal => goal.progress || 0);
            
            window.goalProgressChart.data.labels = goalLabels;
            window.goalProgressChart.data.datasets[0].data = goalProgressData;
            window.goalProgressChart.update();
            
            // æ›´æ–°æƒ…ç·’åˆ†ä½ˆåœ–è¡¨
            const moodCounts = {};
            
            dateRange.forEach(date => {
                const mood = data.dailyState[date]?.mood;
                if (mood) {
                    moodCounts[mood] = (moodCounts[mood] || 0) + 1;
                }
            });
            
            const moodLabels = Object.keys(moodCounts).map(getMoodName);
            const moodData = Object.values(moodCounts);
            
            window.moodDistributionChart.data.labels = moodLabels;
            window.moodDistributionChart.data.datasets[0].data = moodData;
            window.moodDistributionChart.update();
            
            // æ›´æ–°æ´å¯Ÿèˆ‡å»ºè­°
            generateInsights(dateRange);
        }

        // ç”Ÿæˆæ•¸æ“šæ´å¯Ÿ
        function generateInsights(dateRange) {
            const insightsContainer = document.getElementById('insights-container');
            
            // æª¢æŸ¥æ˜¯å¦æœ‰è¶³å¤ çš„æ•¸æ“š
            if (dateRange.length < 3) {
                insightsContainer.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center">éœ€è¦è‡³å°‘3å¤©çš„æ•¸æ“šæ‰èƒ½ç”Ÿæˆæ´å¯Ÿã€‚</p>';
                return;
            }
            
            // æ”¶é›†æ•¸æ“š
            let taskCompletionCount = 0;
            let taskTotalCount = 0;
            let energyLevelSum = 0;
            let energyLevelCount = 0;
            let moodCounts = {};
            
            dateRange.forEach(date => {
                // ä»»å‹™å®Œæˆæƒ…æ³
                const tasks = data.tasks[date] || [];
                const completedTasks = tasks.filter(task => task.completed).length;
                taskCompletionCount += completedTasks;
                taskTotalCount += tasks.length;
                
                // èƒ½é‡ç­‰ç´š
                if (data.dailyState[date] && data.dailyState[date].energy) {
                    energyLevelSum += data.dailyState[date].energy;
                    energyLevelCount++;
                }
                
                // å¿ƒæƒ…çµ±è¨ˆ
                if (data.dailyState[date] && data.dailyState[date].mood) {
                    const mood = data.dailyState[date].mood;
                    moodCounts[mood] = (moodCounts[mood] || 0) + 1;
                }
            });
            
            // è¨ˆç®—å¹³å‡å€¼
            const taskCompletionRate = taskTotalCount > 0 ? Math.round((taskCompletionCount / taskTotalCount) * 100) : 0;
            const avgEnergyLevel = energyLevelCount > 0 ? (energyLevelSum / energyLevelCount).toFixed(1) : 0;
            
            // æ‰¾å‡ºæœ€å¸¸è¦‹çš„å¿ƒæƒ…
            let mostCommonMood = '';
            let maxCount = 0;
            
            Object.entries(moodCounts).forEach(([mood, count]) => {
                if (count > maxCount) {
                    mostCommonMood = mood;
                    maxCount = count;
                }
            });
            
            // ç”Ÿæˆæ´å¯Ÿæ–‡å­—
            let insightsHTML = `
                <div class="space-y-4">
                    <div>
                        <h3 class="font-medium mb-2">æ•¸æ“šæ‘˜è¦ (${dateRange.length}å¤©)</h3>
                        <ul class="list-disc pl-5 space-y-1 text-sm">
                            <li>ä»»å‹™å®Œæˆç‡: <span class="font-medium">${taskCompletionRate}%</span> (å…±å®Œæˆ ${taskCompletionCount}/${taskTotalCount} å€‹ä»»å‹™)</li>
                            <li>å¹³å‡èƒ½é‡ç­‰ç´š: <span class="font-medium">${avgEnergyLevel}</span>/10</li>
                            <li>æœ€å¸¸è¦‹çš„å¿ƒæƒ…: <span class="font-medium">${getMoodEmoji(mostCommonMood)} ${getMoodName(mostCommonMood)}</span></li>
                        </ul>
                    </div>
            `;
            
            // ç”Ÿæˆå»ºè­°
            insightsHTML += `
                <div>
                    <h3 class="font-medium mb-2">æ´å¯Ÿèˆ‡å»ºè­°</h3>
                    <ul class="list-disc pl-5 space-y-1 text-sm">
            `;
            
            // æ ¹æ“šä»»å‹™å®Œæˆç‡çµ¦äºˆå»ºè­°
            if (taskCompletionRate < 30) {
                insightsHTML += `<li>ä½ çš„ä»»å‹™å®Œæˆç‡è¼ƒä½ã€‚å˜—è©¦è¨­å®šæ›´å°ã€æ›´å…·é«”çš„ä»»å‹™ï¼Œæˆ–æ¸›å°‘æ¯æ—¥ä»»å‹™æ•¸é‡ï¼Œç¢ºä¿å®ƒå€‘æ˜¯çœŸæ­£é‡è¦ä¸”å¯è¡Œçš„ã€‚</li>`;
            } else if (taskCompletionRate >= 30 && taskCompletionRate < 70) {
                insightsHTML += `<li>ä½ çš„ä»»å‹™å®Œæˆç‡è™•æ–¼ä¸­ç­‰æ°´å¹³ã€‚è€ƒæ…®ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•ç­‰æŠ€å·§ä¾†æé«˜å°ˆæ³¨åŠ›ï¼Œå„ªå…ˆè™•ç†æœ€é‡è¦çš„ä»»å‹™ã€‚</li>`;
            } else if (taskCompletionRate >= 70) {
                insightsHTML += `<li>ä½ çš„ä»»å‹™å®Œæˆç‡å¾ˆé«˜ï¼è«‹ç¢ºä¿ä½ è¨­å®šçš„ä»»å‹™å…·æœ‰è¶³å¤ çš„æŒ‘æˆ°æ€§ï¼Œé¿å…é™·å…¥åªå®Œæˆç°¡å–®ä»»å‹™çš„èˆ’é©å€ã€‚</li>`;
            }
            
            // æ ¹æ“šèƒ½é‡ç­‰ç´šçµ¦äºˆå»ºè­°
            if (avgEnergyLevel < 4) {
                insightsHTML += `<li>ä½ çš„å¹³å‡èƒ½é‡ç­‰ç´šè¼ƒä½ã€‚è«‹æ³¨æ„ä¼‘æ¯å’Œè‡ªæˆ‘ç…§é¡§ï¼Œç¢ºä¿è‰¯å¥½çš„ç¡çœ å“è³ªï¼Œè€ƒæ…®èª¿æ•´å·¥ä½œ/ä¼‘æ¯æ¯”ä¾‹ã€‚</li>`;
            } else if (avgEnergyLevel >= 4 && avgEnergyLevel < 7) {
                insightsHTML += `<li>ä½ çš„èƒ½é‡ç­‰ç´šè™•æ–¼ä¸­ç­‰æ°´å¹³ã€‚å˜—è©¦æ‰¾å‡ºèƒ½é‡é«˜å³°æ™‚æ®µï¼Œåœ¨é‚£äº›æ™‚é–“å®‰æ’é‡è¦ä»»å‹™ï¼Œåœ¨èƒ½é‡ä½è°·æ™‚å®‰æ’è¼•é¬†æ´»å‹•æˆ–ä¼‘æ¯ã€‚</li>`;
            } else if (avgEnergyLevel >= 7) {
                insightsHTML += `<li>ä½ çš„èƒ½é‡ç­‰ç´šå¾ˆé«˜ï¼å……åˆ†åˆ©ç”¨é€™ä¸€å„ªå‹¢ï¼ŒåŒæ™‚æ³¨æ„ä¸è¦é€æ”¯è‡ªå·±ï¼Œä¿æŒé€™ç¨®ç‹€æ…‹çš„å¯æŒçºŒæ€§ã€‚</li>`;
            }
            
            // æ ¹æ“šå¿ƒæƒ…çµ¦äºˆå»ºè­°
            if (mostCommonMood === 'happy' || mostCommonMood === 'motivated' || mostCommonMood === 'excited' || mostCommonMood === 'grateful') {
                insightsHTML += `<li>ä½ çš„å¿ƒæƒ…æ™®éç©æ¥µæ­£é¢ï¼è«‹è¨˜éŒ„ä¸‹æ˜¯ä»€éº¼å› ç´ ä¿ƒæˆäº†é€™ç¨®ç©æ¥µæƒ…ç·’ï¼Œä»¥ä¾¿åœ¨æœªä¾†é‡ç¾ã€‚</li>`;
            } else if (mostCommonMood === 'calm') {
                insightsHTML += `<li>ä½ çš„å¿ƒæƒ…é€šå¸¸å¾ˆå¹³éœã€‚é€™æ˜¯ä¸€å€‹è‰¯å¥½çš„å¿ƒç†ç‹€æ…‹ï¼Œæœ‰åŠ©æ–¼ç©©å®šåœ°é€²æ­¥ã€‚åœ¨å£“åŠ›ä¾†è‡¨æ™‚ï¼Œå›æƒ³å¦‚ä½•ä¿æŒé€™ç¨®å¹³éœã€‚</li>`;
            } else if (mostCommonMood === 'tired' || mostCommonMood === 'anxious' || mostCommonMood === 'sad' || mostCommonMood === 'angry' || mostCommonMood === 'confused') {
                insightsHTML += `<li>ä½ çš„å¿ƒæƒ…å¯èƒ½å—åˆ°ä¸€äº›æŒ‘æˆ°ã€‚è€ƒæ…®å¢åŠ ä¸€äº›æ„‰æ‚…æ´»å‹•ï¼Œå°‹æ±‚ç¤¾äº¤æ”¯æŒï¼Œæˆ–è€…é©ç•¶èª¿æ•´ä½ çš„ç›®æ¨™æœŸæœ›ã€‚</li>`;
            }
            
            // ä»»å‹™ç¯€å¥å’Œæ¨¡å¼
            if (taskTotalCount > 0) {
                // æª¢æŸ¥æ˜¯å¦æœ‰ä»»å‹™é›†ä¸­çš„æ¨¡å¼ï¼ˆä¾‹å¦‚é€±ä¸€è¨­å®šå¾ˆå¤šä»»å‹™ï¼‰
                const tasksByWeekday = Array(7).fill(0);
                const completionRateByWeekday = Array(7).fill(0);
                const tasksCountByWeekday = Array(7).fill(0);
                
                dateRange.forEach(date => {
                    const dayObj = parseDate(date);
                    const weekday = dayObj.getDay();
                    const tasks = data.tasks[date] || [];
                    const completed = tasks.filter(task => task.completed).length;
                    
                    tasksByWeekday[weekday] += tasks.length;
                    tasksCountByWeekday[weekday]++;
                    if (tasks.length > 0) {
                        completionRateByWeekday[weekday] += (completed / tasks.length);
                    }
                });
                
                // å¹³å‡æ¯å€‹æ˜ŸæœŸå¹¾çš„ä»»å‹™æ•¸
                const avgTasksByWeekday = tasksByWeekday.map((sum, index) => 
                    tasksCountByWeekday[index] > 0 ? sum / tasksCountByWeekday[index] : 0
                );
                
                // å¹³å‡æ¯å€‹æ˜ŸæœŸå¹¾çš„å®Œæˆç‡
                const avgCompletionRateByWeekday = completionRateByWeekday.map((sum, index) => 
                    tasksCountByWeekday[index] > 0 ? sum / tasksCountByWeekday[index] : 0
                );
                
                // æ‰¾å‡ºä»»å‹™æœ€å¤šå’Œæœ€å°‘çš„æ—¥å­
                const maxTasksWeekday = avgTasksByWeekday.indexOf(Math.max(...avgTasksByWeekday));
                const minTasksWeekday = avgTasksByWeekday.filter(v => v > 0).length > 0 ? 
                    avgTasksByWeekday.findIndex(v => v > 0 && v === Math.min(...avgTasksByWeekday.filter(v => v > 0))) : -1;
                
                // æ‰¾å‡ºå®Œæˆç‡æœ€é«˜å’Œæœ€ä½çš„æ—¥å­
                const completionRatesWithTasks = avgCompletionRateByWeekday.map((rate, index) => 
                    tasksCountByWeekday[index] > 0 ? rate : -1
                );
                const maxCompletionWeekday = completionRatesWithTasks.indexOf(Math.max(...completionRatesWithTasks));
                const minCompletionWeekday = completionRatesWithTasks.filter(v => v >= 0).length > 0 ? 
                    completionRatesWithTasks.findIndex(v => v >= 0 && v === Math.min(...completionRatesWithTasks.filter(v => v >= 0))) : -1;
                
                const weekdayNames = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
                
                if (maxTasksWeekday !== -1) {
                    insightsHTML += `<li>ä½ é€šå¸¸åœ¨<strong>${weekdayNames[maxTasksWeekday]}</strong>è¨­å®šæœ€å¤šä»»å‹™ã€‚è€ƒæ…®åˆç†åˆ†é…ä»»å‹™ï¼Œé¿å…å·¥ä½œéè¼‰ã€‚</li>`;
                }
                
                if (maxCompletionWeekday !== -1 && avgCompletionRateByWeekday[maxCompletionWeekday] > 0.7) {
                    insightsHTML += `<li>ä½ åœ¨<strong>${weekdayNames[maxCompletionWeekday]}</strong>çš„ä»»å‹™å®Œæˆç‡æœ€é«˜ (${Math.round(avgCompletionRateByWeekday[maxCompletionWeekday] * 100)}%)ã€‚åˆ†æé€™ä¸€å¤©çš„æƒ…æ³ï¼Œæ‰¾å‡ºå¯ä»¥è¤‡è£½çš„æˆåŠŸå› ç´ ã€‚</li>`;
                }
                
                if (minCompletionWeekday !== -1 && avgCompletionRateByWeekday[minCompletionWeekday] < 0.5 && tasksCountByWeekday[minCompletionWeekday] >= 2) {
                    insightsHTML += `<li>ä½ åœ¨<strong>${weekdayNames[minCompletionWeekday]}</strong>çš„ä»»å‹™å®Œæˆç‡æœ€ä½ (${Math.round(avgCompletionRateByWeekday[minCompletionWeekday] * 100)}%)ã€‚é€™å¤©å¯èƒ½éœ€è¦ç‰¹åˆ¥ç­–ç•¥æˆ–æ¸›å°‘ä»»å‹™é‡ã€‚</li>`;
                }
            }
            
            // ç›®æ¨™é€²åº¦åˆ†æ
            if (data.goals.length > 0) {
                // æ‰¾å‡ºé€²åº¦æœ€é«˜å’Œæœ€ä½çš„ç›®æ¨™
                const maxProgressGoal = [...data.goals].sort((a, b) => (b.progress || 0) - (a.progress || 0))[0];
                const minProgressGoal = [...data.goals].filter(g => g.id in (data.subtasks || {})).sort((a, b) => (a.progress || 0) - (b.progress || 0))[0];
                
                if (maxProgressGoal && maxProgressGoal.progress > 50) {
                    insightsHTML += `<li>ä½ åœ¨ã€Œ${maxProgressGoal.title}ã€ç›®æ¨™ä¸Šé€²å±•é †åˆ© (${maxProgressGoal.progress}%)ï¼Œç¹¼çºŒä¿æŒï¼</li>`;
                }
                
                if (minProgressGoal && minProgressGoal.progress < 30 && data.subtasks[minProgressGoal.id]?.length > 0) {
                    insightsHTML += `<li>ã€Œ${minProgressGoal.title}ã€ç›®æ¨™çš„é€²åº¦è¼ƒæ…¢ (${minProgressGoal.progress}%)ã€‚è€ƒæ…®é‡æ–°è©•ä¼°é€™å€‹ç›®æ¨™çš„å„ªå…ˆç´šæˆ–å°‡å­ä»»å‹™åˆ†è§£å¾—æ›´å°ã€‚</li>`;
                }
            }
            
            insightsHTML += `
                    </ul>
                </div>
                <div>
                    <h3 class="font-medium mb-2">ä¸‹ä¸€æ­¥è¡Œå‹•å»ºè­°</h3>
                    <ul class="list-disc pl-5 space-y-1 text-sm">
            `;
            
            // æ ¹æ“šæ•´é«”æƒ…æ³æä¾›è¡Œå‹•å»ºè­°
            insightsHTML += `<li>æ¯å¤©èŠ±5åˆ†é˜å›é¡§ç›®æ¨™ï¼Œç¢ºä¿æ—¥å¸¸ä»»å‹™èˆ‡é•·æœŸç›®æ¨™ä¿æŒä¸€è‡´ã€‚</li>`;
            
            if (taskCompletionRate < 50) {
                insightsHTML += `<li>å˜—è©¦"2åˆ†é˜åŸå‰‡"ï¼šå¦‚æœä¸€å€‹ä»»å‹™ä¸è¶…é2åˆ†é˜ï¼Œç«‹å³å®Œæˆå®ƒï¼Œè€Œä¸æ˜¯åŠ å…¥å¾…è¾¦äº‹é …ã€‚</li>`;
                insightsHTML += `<li>ä½¿ç”¨"ç‘å£«ä¹³é…ªæ³•"ï¼šä¸å¿…å¾é ­åˆ°å°¾å®Œæˆä»»å‹™ï¼Œå¯ä»¥åœ¨æ–¹ä¾¿çš„æ™‚å€™å•ƒæ‰ä¸€å°å¡Šã€‚</li>`;
            }
            
            if (avgEnergyLevel < 5) {
                insightsHTML += `<li>å¢åŠ æˆ¶å¤–æ´»å‹•æ™‚é–“ï¼Œå³ä½¿åªæ˜¯ç°¡çŸ­çš„æ­¥è¡Œï¼Œä¹Ÿèƒ½é¡¯è‘—æå‡èƒ½é‡å’Œå¿ƒæƒ…ã€‚</li>`;
                insightsHTML += `<li>å»ºç«‹ç©©å®šçš„ç¡çœ æ™‚é–“è¡¨ï¼Œç¢ºä¿7-8å°æ™‚çš„é«˜è³ªé‡ç¡çœ ã€‚</li>`;
            }
            
            // æ ¹æ“šå¿ƒæƒ…çµ¦äºˆå…·é«”å»ºè­°
            if (mostCommonMood === 'anxious' || mostCommonMood === 'sad') {
                insightsHTML += `<li>æ¯å¤©ç·´ç¿’5åˆ†é˜æ­£å¿µå†¥æƒ³ï¼Œå¹«åŠ©æ¸›è¼•å£“åŠ›å’Œç„¦æ…®ã€‚</li>`;
                insightsHTML += `<li>å»ºç«‹"æ„Ÿæ©æ—¥è¨˜"ç¿’æ…£ï¼Œæ¯å¤©è¨˜éŒ„3ä»¶å€¼å¾—æ„Ÿæ©çš„äº‹æƒ…ã€‚</li>`;
            }
            
            insightsHTML += `
                    </ul>
                </div>
            </div>
            `;
            
            insightsContainer.innerHTML = insightsHTML;
        }

        // äº‹ä»¶ç›£è½å™¨è¨­ç½®
        function setupEventListeners() {
            // å°èˆªåˆ‡æ›
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    document.querySelectorAll('.nav-btn').forEach(b => {
                        b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-700', 'dark:text-indigo-300');
                        b.classList.add('hover:bg-gray-200', 'dark:hover:bg-gray-700');
                    });
                    
                    // æ·»åŠ ç•¶å‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    btn.classList.add('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-700', 'dark:text-indigo-300');
                    btn.classList.remove('hover:bg-gray-200', 'dark:hover:bg-gray-700');
                    
                    // éš±è—æ‰€æœ‰å…§å®¹å€å¡Š
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.add('hidden');
                    });
                    
                    // é¡¯ç¤ºå°æ‡‰çš„å…§å®¹å€å¡Š
                    const targetId = btn.dataset.target;
                    document.getElementById(targetId).classList.remove('hidden');
                    
                    // å¦‚æœåˆ‡æ›åˆ°é€²åº¦å¯è¦–åŒ–ï¼Œæ›´æ–°åœ–è¡¨
                    if (targetId === 'progress-visualization') {
                        updateVisualization();
                    }
                });
            });
            
            // æ—¥æ›†å°èˆª
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                updateCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                updateCalendar();
            });
            
            // èƒ½é‡ç­‰ç´šæ»‘å¡Š
            document.getElementById('energy-level').addEventListener('input', function() {
                document.getElementById('energy-value').textContent = this.value;
                
                // æ›´æ–°æ•¸æ“š
                const dateStr = formatDate(currentDate);
                if (!data.dailyState[dateStr]) {
                    data.dailyState[dateStr] = {};
                }
                
                data.dailyState[dateStr].energy = parseInt(this.value);
                saveData();
            });
            
            // å¿ƒæƒ…æŒ‰éˆ•
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    document.querySelectorAll('.mood-btn').forEach(b => {
                        b.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'border-2', 'border-indigo-500');
                    });
                    
                    // æ·»åŠ ç•¶å‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    btn.classList.add('bg-gray-100', 'dark:bg-gray-700', 'border-2', 'border-indigo-500');
                    
                    // æ›´æ–°æ•¸æ“š
                    const dateStr = formatDate(currentDate);
                    if (!data.dailyState[dateStr]) {
                        data.dailyState[dateStr] = {};
                    }
                    
                    data.dailyState[dateStr].mood = btn.dataset.mood;
                    saveData();
                    
                    // æ›´æ–°æ—¥æ›†
                    updateCalendar();
                });
            });
            
            // åæ€æƒ…ç·’æŒ‰éˆ•
            document.querySelectorAll('.reflection-mood-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // åˆ‡æ›ç•¶å‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    btn.classList.toggle('bg-gray-100');
                    btn.classList.toggle('dark:bg-gray-700');
                    btn.classList.toggle('border-2');
                    btn.classList.toggle('border-indigo-500');
                    
                    // æ›´æ–°æƒ…ç·’å¼·åº¦åˆ—è¡¨
                    updateSelectedMoods();
                });
            });
            
            // æ·»åŠ æ¯æ—¥ä»»å‹™æŒ‰éˆ•
            document.getElementById('add-daily-task').addEventListener('click', () => {
                // é‡ç½®è¡¨å–®
                document.getElementById('daily-task-form').reset();
                document.getElementById('daily-task-form').dataset.editing = 'false';
                delete document.getElementById('daily-task-form').dataset.editIndex;
                delete document.getElementById('daily-task-form').dataset.editDate;
                
                // é¡¯ç¤ºæ¨¡æ…‹æ¡†
                document.getElementById('add-daily-task-modal').classList.remove('hidden');
            });
            
            // å–æ¶ˆæ·»åŠ ä»»å‹™
            document.getElementById('cancel-task').addEventListener('click', () => {
                document.getElementById('add-daily-task-modal').classList.add('hidden');
            });
            
            // æäº¤ä»»å‹™è¡¨å–®
            document.getElementById('daily-task-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // ç²å–è¡¨å–®æ•¸æ“š
                const title = document.getElementById('task-title').value.trim();
                const category = document.getElementById('task-category').value;
                const notes = document.getElementById('task-notes').value.trim();
                const link = document.getElementById('task-link').value.trim();
                const priority = document.getElementById('task-priority').value;
                
                // é©—è­‰
                if (!title) {
                    alert('è«‹è¼¸å…¥ä»»å‹™åç¨±');
                    return;
                }
                
                // åˆ¤æ–·æ˜¯ç·¨è¼¯é‚„æ˜¯æ–°å¢
                const isEditing = this.dataset.editing === 'true';
                const currentDateStr = formatDate(currentDate);
                
                if (isEditing) {
                    // ç·¨è¼¯ç¾æœ‰ä»»å‹™
                    if (this.dataset.editDate && this.dataset.editIndex) {
                        const editIndex = parseInt(this.dataset.editIndex);
                        const editDateStr = this.dataset.editDate;
                        
                        if (!data.tasks[editDateStr]) {
                            data.tasks[editDateStr] = [];
                        }
                        
                        if (editIndex >= 0 && editIndex < data.tasks[editDateStr].length) {
                            // ä¿ç•™completedç‹€æ…‹
                            const completed = data.tasks[editDateStr][editIndex].completed;
                            const oldTitle = data.tasks[editDateStr][editIndex].title;
                            
                            // æ›´æ–°ç•¶å‰æ—¥æœŸçš„ä»»å‹™
                            data.tasks[editDateStr][editIndex] = {
                                title,
                                category,
                                notes,
                                link,
                                completed,
                                priority
                            };
                            
                            // å¦‚æœæ¨™é¡Œå·²è®Šæ›´ï¼Œé‚„éœ€è¦æ›´æ–°æ‰€æœ‰ä½¿ç”¨èˆŠæ¨™é¡Œçš„ä»»å‹™
                            if (oldTitle !== title) {
                                for (const date in data.tasks) {
                                    if (date !== editDateStr && data.tasks.hasOwnProperty(date) && Array.isArray(data.tasks[date])) {
                                        data.tasks[date].forEach((task, i) => {
                                            if (task.title === oldTitle) {
                                                // æ›´æ–°é™¤completedå¤–çš„æ‰€æœ‰å±¬æ€§
                                                data.tasks[date][i] = {
                                                    ...data.tasks[date][i],
                                                    title,
                                                    category,
                                                    notes,
                                                    link,
                                                    priority
                                                };
                                            }
                                        });
                                    }
                                }
                            }
                        }
                    } else {
                        // é€™æ˜¯ç·¨è¼¯ä¸€å€‹ä¸åœ¨ç•¶å‰æ—¥æœŸçš„ä»»å‹™ï¼Œå°‡å®ƒä½œç‚ºæ–°ä»»å‹™æ·»åŠ åˆ°ç•¶å‰æ—¥æœŸ
                        if (!data.tasks[currentDateStr]) {
                            data.tasks[currentDateStr] = [];
                        }
                        
                        // æª¢æŸ¥ç•¶å‰æ—¥æœŸæ˜¯å¦å·²æœ‰åŒåä»»å‹™
                        const existingTaskIndex = data.tasks[currentDateStr].findIndex(t => t.title === title);
                        
                        if (existingTaskIndex !== -1) {
                            // å¦‚æœå·²å­˜åœ¨ï¼Œæ›´æ–°å®ƒ
                            data.tasks[currentDateStr][existingTaskIndex] = {
                                ...data.tasks[currentDateStr][existingTaskIndex],
                                category,
                                notes,
                                link,
                                priority
                            };
                        } else {
                            // æ–°å¢åˆ°ç•¶å‰æ—¥æœŸ
                            data.tasks[currentDateStr].push({
                                title,
                                category,
                                notes,
                                link,
                                completed: false,
                                priority
                            });
                        }
                        
                        // åŒæ™‚æ›´æ–°æ‰€æœ‰ä½¿ç”¨ç›¸åŒæ¨™é¡Œçš„ä»»å‹™çš„å±¬æ€§ï¼ˆä½†ä¸åŒ…æ‹¬completedç‹€æ…‹ï¼‰
                        for (const date in data.tasks) {
                            if (date !== currentDateStr && data.tasks.hasOwnProperty(date) && Array.isArray(data.tasks[date])) {
                                data.tasks[date].forEach((task, i) => {
                                    if (task.title === title) {
                                        // æ›´æ–°é™¤completedå¤–çš„æ‰€æœ‰å±¬æ€§
                                        data.tasks[date][i] = {
                                            ...data.tasks[date][i],
                                            category,
                                            notes,
                                            link,
                                            priority
                                        };
                                    }
                                });
                            }
                        }
                    }
                } else {
                    // æ–°å¢ä»»å‹™
                    if (!data.tasks[currentDateStr]) {
                        data.tasks[currentDateStr] = [];
                    }
                    
                    // æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨åŒåä»»å‹™
                    const existingTaskIndex = data.tasks[currentDateStr].findIndex(t => t.title === title);
                    
                    if (existingTaskIndex !== -1) {
                        if (confirm('å·²å­˜åœ¨ç›¸åŒåç¨±çš„ä»»å‹™ï¼Œæ˜¯å¦æ›´æ–°ç¾æœ‰ä»»å‹™ï¼Ÿ')) {
                            // ä¿ç•™completedç‹€æ…‹
                            const completed = data.tasks[currentDateStr][existingTaskIndex].completed;
                            
                            // æ›´æ–°ç¾æœ‰ä»»å‹™
                            data.tasks[currentDateStr][existingTaskIndex] = {
                                title,
                                category,
                                notes,
                                link,
                                completed,
                                priority
                            };
                        } else {
                            return; // ç”¨æˆ¶å–æ¶ˆæ“ä½œ
                        }
                    } else {
                        // æ·»åŠ æ–°ä»»å‹™
                        data.tasks[currentDateStr].push({
                            title,
                            category,
                            notes,
                            link,
                            completed: false,
                            priority
                        });
                    }
                }
                
                // ä¿å­˜æ•¸æ“š
                saveData();
                
                // é‡æ–°åŠ è¼‰ä»»å‹™åˆ—è¡¨
                loadDailyTasks();
                
                // æ›´æ–°æ—¥æ›†
                updateCalendar();
                
                // æ›´æ–°çµ±è¨ˆæ‘˜è¦
                updateStatsSummary();
                
                // éš±è—æ¨¡æ…‹æ¡†
                document.getElementById('add-daily-task-modal').classList.add('hidden');
                
                // é‡ç½®è¡¨å–®
                this.reset();
                this.dataset.editing = 'false';
                delete this.dataset.editIndex;
                delete this.dataset.editDate;
            });
                
            // æ·»åŠ ç›®æ¨™æŒ‰éˆ•
            document.getElementById('add-goal').addEventListener('click', () => {
                // é‡ç½®è¡¨å–®
                document.getElementById('goal-form').reset();
                document.getElementById('goal-form').dataset.editing = 'false';
                
                // é¡¯ç¤ºæ¨¡æ…‹æ¡†
                document.getElementById('add-goal-modal').classList.remove('hidden');
            });
            
            // å–æ¶ˆæ·»åŠ ç›®æ¨™
            document.getElementById('cancel-goal').addEventListener('click', () => {
                document.getElementById('add-goal-modal').classList.add('hidden');
            });
            
            // ç·¨è¼¯ç›®æ¨™æŒ‰éˆ•
            document.getElementById('edit-goal').addEventListener('click', () => {
                if (!currentGoalId) return;
                
                // ç²å–ç•¶å‰ç›®æ¨™
                const goal = data.goals.find(g => g.id === currentGoalId);
                if (!goal) return;
                
                // å¡«å……è¡¨å–®
                document.getElementById('goal-title').value = goal.title || '';
                document.getElementById('goal-why').value = goal.why || '';
                document.getElementById('goal-category').value = goal.category || 'other';
                document.getElementById('goal-deadline').value = goal.deadline || '';
                document.getElementById('goal-specific').value = goal.specific || '';
                document.getElementById('goal-measurable').value = goal.measurable || '';
                document.getElementById('goal-achievable').value = goal.achievable || '';
                document.getElementById('goal-relevant').value = goal.relevant || '';
                document.getElementById('goal-timebound').value = goal.timebound || '';
                
                // è¨­ç½®æ¨™èªŒï¼Œè¡¨ç¤ºæ­£åœ¨ç·¨è¼¯è€Œä¸æ˜¯æ–°å¢
                document.getElementById('goal-form').dataset.editing = 'true';
                
                // é¡¯ç¤ºæ¨¡æ…‹æ¡†
                document.getElementById('add-goal-modal').classList.remove('hidden');
            });
            
            // åˆªé™¤ç›®æ¨™æŒ‰éˆ•
            document.getElementById('delete-goal').addEventListener('click', () => {
                if (!currentGoalId) return;
                
                if (confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹ç›®æ¨™å—ï¼Ÿç›¸é—œçš„å­ä»»å‹™ä¹Ÿæœƒè¢«åˆªé™¤ã€‚')) {
                    // å¾æ•¸æ“šä¸­åˆªé™¤ç›®æ¨™
                    const goalIndex = data.goals.findIndex(g => g.id === currentGoalId);
                    if (goalIndex !== -1) {
                        data.goals.splice(goalIndex, 1);
                    }
                    
                    // åˆªé™¤ç›¸é—œçš„å­ä»»å‹™
                    if (data.subtasks[currentGoalId]) {
                        delete data.subtasks[currentGoalId];
                    }
                    
                    // é‡ç½®ç•¶å‰ç›®æ¨™
                    currentGoalId = null;
                    
                    // ä¿å­˜ä¸¦é‡æ–°åŠ è¼‰
                    saveData();
                    loadGoals();
                    
                    // æ›´æ–°çµ±è¨ˆæ‘˜è¦
                    updateStatsSummary();
                }
            });
            
            // æäº¤ç›®æ¨™è¡¨å–®
            document.getElementById('goal-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // ç²å–è¡¨å–®æ•¸æ“š
                const title = document.getElementById('goal-title').value.trim();
                const why = document.getElementById('goal-why').value.trim();
                const category = document.getElementById('goal-category').value;
                const deadline = document.getElementById('goal-deadline').value;
                const specific = document.getElementById('goal-specific').value.trim();
                const measurable = document.getElementById('goal-measurable').value.trim();
                const achievable = document.getElementById('goal-achievable').value.trim();
                const relevant = document.getElementById('goal-relevant').value.trim();
                const timebound = document.getElementById('goal-timebound').value.trim();
                
                // é©—è­‰
                if (!title || !why || !specific || !measurable || !achievable || !relevant || !timebound) {
                    alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½');
                    return;
                }
                
                // åˆ¤æ–·æ˜¯ç·¨è¼¯é‚„æ˜¯æ–°å¢
                const isEditing = this.dataset.editing === 'true';
                
                if (isEditing) {
                    // ç·¨è¼¯ç¾æœ‰ç›®æ¨™
                    const goalIndex = data.goals.findIndex(g => g.id === currentGoalId);
                    if (goalIndex !== -1) {
                        // ä¿ç•™é€²åº¦å’ŒID
                        const progress = data.goals[goalIndex].progress || 0;
                        const id = data.goals[goalIndex].id;
                        
                        data.goals[goalIndex] = {
                            id,
                            title,
                            why,
                            category,
                            deadline,
                            specific,
                            measurable,
                            achievable,
                            relevant,
                            timebound,
                            progress
                        };
                    }
                } else {
                    // æ–°å¢ç›®æ¨™
                    const newGoal = {
                        id: generateId(),
                        title,
                        why,
                        category,
                        deadline,
                        specific,
                        measurable,
                        achievable,
                        relevant,
                        timebound,
                        progress: 0
                    };
                    
                    data.goals.push(newGoal);
                    
                    // è¨­ç½®ç•¶å‰ç›®æ¨™ç‚ºæ–°å¢çš„ç›®æ¨™
                    currentGoalId = newGoal.id;
                }
                
                // ä¿å­˜æ•¸æ“š
                saveData();
                
                // é‡æ–°åŠ è¼‰ç›®æ¨™åˆ—è¡¨
                loadGoals();
                
                // æ›´æ–°çµ±è¨ˆæ‘˜è¦
                updateStatsSummary();
                
                // éš±è—æ¨¡æ…‹æ¡†
                document.getElementById('add-goal-modal').classList.add('hidden');
            });
            
            // æ·»åŠ å­ä»»å‹™æŒ‰éˆ•
            document.getElementById('add-subtask').addEventListener('click', () => {
                if (!currentGoalId) return;
                
                // é‡ç½®è¡¨å–®
                document.getElementById('subtask-form').reset();
                document.getElementById('subtask-form').dataset.editing = 'false';
                
                // é¡¯ç¤ºæ¨¡æ…‹æ¡†
                document.getElementById('add-subtask-modal').classList.remove('hidden');
            });
            
            // å–æ¶ˆæ·»åŠ å­ä»»å‹™
            document.getElementById('cancel-subtask').addEventListener('click', () => {
                document.getElementById('add-subtask-modal').classList.add('hidden');
            });
            
            // æäº¤å­ä»»å‹™è¡¨å–®
            document.getElementById('subtask-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!currentGoalId) return;
                
                // ç²å–è¡¨å–®æ•¸æ“š
                const title = document.getElementById('subtask-title').value.trim();
                const description = document.getElementById('subtask-description').value.trim();
                const link = document.getElementById('subtask-link').value.trim();
                const deadline = document.getElementById('subtask-deadline').value;
                
                // é©—è­‰
                if (!title) {
                    alert('è«‹è¼¸å…¥å­ä»»å‹™åç¨±');
                    return;
                }
                
                // åˆ¤æ–·æ˜¯ç·¨è¼¯é‚„æ˜¯æ–°å¢
                const isEditing = this.dataset.editing === 'true';
                
                if (isEditing) {
                    // ç·¨è¼¯ç¾æœ‰å­ä»»å‹™
                    const editIndex = parseInt(this.dataset.editIndex);
                    
                    if (!data.subtasks[currentGoalId]) {
                        data.subtasks[currentGoalId] = [];
                    }
                    
                    if (editIndex >= 0 && editIndex < data.subtasks[currentGoalId].length) {
                        // ä¿ç•™completedç‹€æ…‹
                        const completed = data.subtasks[currentGoalId][editIndex].completed;
                        
                        data.subtasks[currentGoalId][editIndex] = {
                            title,
                            description,
                            link,
                            deadline,
                            completed
                        };
                    }
                } else {
                    // æ–°å¢å­ä»»å‹™
                    if (!data.subtasks[currentGoalId]) {
                        data.subtasks[currentGoalId] = [];
                    }
                    
                    data.subtasks[currentGoalId].push({
                        title,
                        description,
                        link,
                        deadline,
                        completed: false
                    });
                }
                
                // æ›´æ–°ç›®æ¨™é€²åº¦
                updateGoalProgress();
                
                // ä¿å­˜æ•¸æ“š
                saveData();
                
                // é‡æ–°åŠ è¼‰å­ä»»å‹™åˆ—è¡¨å’Œç›®æ¨™åˆ—è¡¨
                loadSubtasks();
                loadGoals();
                
                // æ›´æ–°çµ±è¨ˆæ‘˜è¦
                updateStatsSummary();
                
                // éš±è—æ¨¡æ…‹æ¡†
                document.getElementById('add-subtask-modal').classList.add('hidden');
            });
            
            // ä¿å­˜åæ€æŒ‰éˆ•
            document.getElementById('save-reflection').addEventListener('click', () => {
                saveReflection();
            });
            
            // æ—¥æœŸç¯„åœæŒ‰éˆ•
            document.querySelectorAll('.date-range-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    document.querySelectorAll('.date-range-btn').forEach(b => {
                        b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-700', 'dark:text-indigo-300');
                        b.classList.add('bg-gray-100', 'dark:bg-gray-700', 'hover:bg-gray-200', 'dark:hover:bg-gray-600', 'text-gray-700', 'dark:text-gray-300');
                    });
                    
                    // æ·»åŠ ç•¶å‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                    btn.classList.add('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-700', 'dark:text-indigo-300');
                    btn.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'hover:bg-gray-200', 'dark:hover:bg-gray-600', 'text-gray-700', 'dark:text-gray-300');
                    
                    // æ›´æ–°æ—¥æœŸç¯„åœ
                    dateRangeForVisualization = parseInt(btn.dataset.range);
                    
                    // æ›´æ–°å¯è¦–åŒ–
                    updateVisualization();
                });
            });
            
            // æ‡‰ç”¨è‡ªè¨‚æ—¥æœŸç¯„åœ
            document.getElementById('apply-custom-range').addEventListener('click', () => {
                const startDate = document.getElementById('date-range-start').value;
                const endDate = document.getElementById('date-range-end').value;
                
                if (!startDate || !endDate) {
                    alert('è«‹é¸æ“‡é–‹å§‹å’ŒçµæŸæ—¥æœŸ');
                    return;
                }
                
                const start = new Date(startDate);
                const end = new Date(endDate);
                
                if (start > end) {
                    alert('é–‹å§‹æ—¥æœŸä¸èƒ½æ™šæ–¼çµæŸæ—¥æœŸ');
                    return;
                }
                
                // è¨ˆç®—æ—¥æœŸç¯„åœå¤©æ•¸
                const dayDiff = Math.round((end - start) / (1000 * 60 * 60 * 24)) + 1;
                dateRangeForVisualization = dayDiff;
                
                // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„æ´»å‹•ç‹€æ…‹
                document.querySelectorAll('.date-range-btn').forEach(b => {
                    b.classList.remove('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-700', 'dark:text-indigo-300');
                    b.classList.add('bg-gray-100', 'dark:bg-gray-700', 'hover:bg-gray-200', 'dark:hover:bg-gray-600', 'text-gray-700', 'dark:text-gray-300');
                });
                
                // æ›´æ–°å¯è¦–åŒ–
                updateVisualization();
            });
            
            // æ›ä¸€å‰‡æŒ‰éˆ•é»æ“Šäº‹ä»¶
            document.getElementById('change-image-btn').addEventListener('click', function() {
                // é¸æ“‡éš¨æ©Ÿæ¿€å‹µèªéŒ„
                const randomQuote = getRandomItem(motivationalQuotes);
                document.getElementById('motivation-quote').textContent = randomQuote;
                
                // è¼‰å…¥éš¨æ©Ÿåœ–ç‰‡
                loadRandomImage();
            });
        }

        // æ›´æ–°é¸æ“‡çš„æƒ…ç·’åˆ—è¡¨
        function updateSelectedMoods() {
            const selectedMoods = [];
            document.querySelectorAll('.reflection-mood-btn.border-2').forEach(btn => {
                selectedMoods.push({
                    name: btn.dataset.mood,
                    intensity: 3 // é»˜èªå¼·åº¦
                });
            });
            
            // æ›´æ–°æƒ…ç·’å¼·åº¦åˆ—è¡¨
            const moodsContainer = document.getElementById('selected-moods-container');
            moodsContainer.innerHTML = '';
            
            if (selectedMoods.length === 0) {
                moodsContainer.innerHTML = '<div class="text-gray-500 dark:text-gray-400 text-sm italic">è«‹å¾ä¸Šæ–¹é¸æ“‡ä¸€æˆ–å¤šå€‹æƒ…ç·’</div>';
                return;
            }
            
            selectedMoods.forEach(mood => {
                const moodItem = document.createElement('div');
                moodItem.className = 'flex items-center gap-2';
                moodItem.innerHTML = `
                    <span class="text-sm">${getMoodEmoji(mood.name)} ${getMoodName(mood.name)}</span>
                    <input type="range" min="1" max="5" value="${mood.intensity}" class="flex-1 h-2" data-mood="${mood.name}">
                    <span class="text-sm">${mood.intensity}</span>
                `;
                
                // ç›£è½æ»‘å¡Šè®ŠåŒ–
                const slider = moodItem.querySelector('input[type="range"]');
                const valueDisplay = moodItem.querySelector('span:last-child');
                slider.addEventListener('input', () => {
                    valueDisplay.textContent = slider.value;
                });
                
                moodsContainer.appendChild(moodItem);
            });
        }

        // ä¿å­˜åæ€æ•¸æ“š
        function saveReflection() {
            const dateStr = formatDate(currentDate);
            
            // æ”¶é›†æ‰€é¸æƒ…ç·’åŠå…¶å¼·åº¦
            const selectedMoods = [];
            document.querySelectorAll('#selected-moods-container input[type="range"]').forEach(slider => {
                selectedMoods.push({
                    name: slider.dataset.mood,
                    intensity: parseInt(slider.value)
                });
            });
            
            // æ”¶é›†è¡¨å–®æ•¸æ“š
            const reflectionData = {
                good: document.getElementById('reflection-good').value.trim(),
                improve: document.getElementById('reflection-improve').value.trim(),
                lessons: document.getElementById('reflection-lessons').value.trim(),
                tomorrow: document.getElementById('reflection-tomorrow').value.trim(),
                moods: selectedMoods,
                emotionTriggers: document.getElementById('emotion-triggers').value.trim(),
                negativeThoughts: document.getElementById('negative-thoughts').value.trim(),
                triggerSituation: document.getElementById('trigger-situation').value.trim(),
                thoughtRebuttal: document.getElementById('thought-rebuttal').value.trim(),
                balancedThought: document.getElementById('balanced-thought').value.trim()
            };
            
            // ä¿å­˜æ•¸æ“š
            data.reflections[dateStr] = reflectionData;
            saveData();
            
            // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
            showMessageBox('åæ€å·²æˆåŠŸä¿å­˜ï¼');
        }

        // æ‡‰ç”¨åˆå§‹åŒ–
        function initializeApp() {
            // åˆå§‹åŒ–æ•¸æ“š
            initializeData();
            
            // è¨­ç½®äº‹ä»¶ç›£è½å™¨
            setupEventListeners();
            
            // æ›´æ–°æ—¥æ›†è¦–åœ–
            updateCalendar();
            
            // è¼‰å…¥ç•¶å‰æ—¥æœŸçš„æ•¸æ“š
            loadDailyData();
            
            // è¼‰å…¥ç›®æ¨™åˆ—è¡¨
            loadGoals();
            
            // æ›´æ–°çµ±è¨ˆæ‘˜è¦
            updateStatsSummary();
            
            // ç”Ÿæˆæ¯æ—¥éˆæ„Ÿ
            generateDailyInspiration();
            
            // åˆå§‹åŒ–åœ–è¡¨
            initializeCharts();
        }

        // å•Ÿå‹•æ‡‰ç”¨
        initializeApp();
    </script>
    
    <!-- YouTube API å’Œæ’­æ”¾å™¨åŠŸèƒ½ -->
    <!-- <script>
    // YouTube API å›èª¿å‡½æ•¸
    function onYouTubeIframeAPIReady() {
        if (typeof player === 'undefined' && document.getElementById('youtube-player')) {
            createPlayer();
        }
    }
    </script>

    <!-- æ·»åŠ ä¿®å¾©å¾Œçš„éŸ³æ¨‚æ’­æ”¾å™¨è…³æœ¬ -->
    

    <script src="playlistitems.js"></script>
</body>
</html>